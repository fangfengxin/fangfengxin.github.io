<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>








  <meta name="google-site-verification" content="N8ofSn2GrmJ51OE3RhiifNsuUcNAfC7JAukwhpY-WiY"/>












  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="https://fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"/>
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"/>

<link rel="stylesheet" href="/css/main.css?v=7.2.0"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.png?v=7.2.0" color="#222">


  <link rel="manifest" href="/images/site.webmanifest">


  <meta name="msapplication-config" content="/images/browserconfig.xml"/>





<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":true},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    copycode: {"enable":true,"show_result":true,"style":"default"},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>



  <meta name="description" content="File 类File 类概述 java.io.File 类是文件和目录路径名的抽象表示。 Java 把电脑中的文件和文件夹（目录）封装为了一个 File 类，可以使用 File 类对文件和文件夹进行操作，主要用于文件和目录的创建、查找和删除等操作。  File 类是一个与系统无关的类，任何的操作系统都可以使用这个类中的方法。 重点记住三个单词：  file ：文件 directory ：文件夹（或">
<meta property="og:type" content="article">
<meta property="og:title" content="Java语言高级（4）File类与IO流">
<meta property="og:url" content="https://fangfengxin.top/2020/02/20/java-advanced-4.html">
<meta property="og:site_name" content="Flexia&#39;s Blog">
<meta property="og:description" content="File 类File 类概述 java.io.File 类是文件和目录路径名的抽象表示。 Java 把电脑中的文件和文件夹（目录）封装为了一个 File 类，可以使用 File 类对文件和文件夹进行操作，主要用于文件和目录的创建、查找和删除等操作。  File 类是一个与系统无关的类，任何的操作系统都可以使用这个类中的方法。 重点记住三个单词：  file ：文件 directory ：文件夹（或">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E9%80%92%E5%BD%92%E7%B4%AF%E5%92%8C.jpg">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/FileFilter%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/IO%E6%B5%81%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E5%88%86%E7%B1%BB.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E8%AE%B0%E4%BA%8B%E6%9C%AC%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E5%AD%97%E8%8A%82%E6%B5%81%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E7%BC%93%E5%86%B2%E6%B5%81%E7%9A%84%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/charset.jpg">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E8%BD%AC%E6%8D%A2%E6%B5%81%E7%9A%84%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E6%A6%82%E8%BF%B0.png">
<meta property="og:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E5%BA%8F%E5%88%97%E5%8F%B7%E5%86%B2%E7%AA%81%E5%BC%82%E5%B8%B8%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.png">
<meta property="article:published_time" content="2020-02-20T14:53:30.000Z">
<meta property="article:modified_time" content="2020-07-13T08:44:22.091Z">
<meta property="article:author" content="Flexia">
<meta property="article:tag" content="JavaSE">
<meta property="article:tag" content="Java语言高级">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fangfengxin.top/2020/02/20/java-advanced-4/%E9%80%92%E5%BD%92%E7%B4%AF%E5%92%8C.jpg">





  
  
  <link rel="canonical" href="https://fangfengxin.top/2020/02/20/java-advanced-4"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Java语言高级（4）File类与IO流 | Flexia's Blog</title>
  




  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145696891-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-145696891-1');
    }
  </script>



  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ccc4ebbe605a1363703684938a4b4c40";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Flexia's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">记录小方方的学习之路</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br/>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br/>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br/>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br/>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



</div>
    </header>

    
  
  

  

  <a href="https://github.com/fangfengxin" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fangfengxin.top/2020/02/20/java-advanced-4.html"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Flexia"/>
      <meta itemprop="description" content="小方方跨到计算机，要开始学习各种计算机知识啦，加油嗷~"/>
      <meta itemprop="image" content="/images/avatar.png"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Flexia's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Java语言高级（4）File类与IO流

              
            
          </h2>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-02-20 22:53:30" itemprop="dateCreated datePublished" datetime="2020-02-20T22:53:30+08:00">2020-02-20</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-07-13 16:44:22" itemprop="dateModified" datetime="2020-07-13T16:44:22+08:00">2020-07-13</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaSE/Java%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7/" itemprop="url" rel="index"><span itemprop="name">Java语言高级</span></a></span>

                
                
              
            </span>
          
		  
		  <br/>

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/02/20/java-advanced-4.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/02/20/java-advanced-4.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">52k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">47 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="File-类"><a href="#File-类" class="headerlink" title="File 类"></a><code>File</code> 类</h1><h2 id="File-类概述"><a href="#File-类概述" class="headerlink" title="File 类概述"></a><code>File</code> 类概述</h2><p> <code>java.io.File</code> 类是文件和目录路径名的抽象表示。</p>
<p>Java 把电脑中的文件和文件夹（目录）封装为了一个 <code>File</code> 类，可以使用 <code>File</code> 类对文件和文件夹进行操作，主要用于文件和目录的创建、查找和删除等操作。</p>
<p> <code>File</code> 类是一个与系统无关的类，任何的操作系统都可以使用这个类中的方法。</p>
<p>重点记住三个单词：</p>
<ol>
<li><code>file</code> ：文件</li>
<li><code>directory</code> ：文件夹（或目录）</li>
<li><code>path</code> ：路径</li>
</ol>
<h2 id="静态成员变量"><a href="#静态成员变量" class="headerlink" title="静态成员变量"></a>静态成员变量</h2><ul>
<li><code>static String pathSeparator</code> ：与系统有关的路径分隔符，为了方便，它被表示为一个字符串。</li>
<li><code>static char pathSeparatorChar</code> ：与系统有关的路径分隔符。</li>
<li><code>static String separator</code> ：与系统有关的默认名称分隔符，为了方便，它被表示为一个字符串。</li>
<li><code>static char separatorChar</code> ：与系统有关的默认名称分隔符。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String pathSeparator = File.pathSeparator;</span><br><span class="line">        System.out.println(pathSeparator); <span class="comment">// 路径分隔符 windows:分号;  linux:冒号:</span></span><br><span class="line">        String separator = File.separator;</span><br><span class="line">        System.out.println(separator); <span class="comment">// 文件名称分隔符 windows:反斜杠\  linux:正斜杠/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="绝对路径和相对路径"><a href="#绝对路径和相对路径" class="headerlink" title="绝对路径和相对路径"></a>绝对路径和相对路径</h2><ul>
<li><strong>绝对路径</strong>：从盘符开始的路径，这是一个完整的路径。</li>
<li><strong>相对路径</strong>：相对于当前项目根目录的路径，这是一个简化的路径，开发中经常使用。</li>
</ul>
<p>注意：</p>
<ol>
<li>路径是不区分大小写的。</li>
<li>路径中的文件名称分隔符：Windows 使用反斜杠 <code>\</code> ，需要转义。</li>
<li>路径可以是以文件结尾，也可以是以文件夹结尾。</li>
<li>路径可以是相对路径，也可以是绝对路径。</li>
<li>路径可以是存在，也可以是不存在。</li>
</ol>
<h2 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h2><ul>
<li><code>public File(String pathname)</code> ：通过将给定的<strong>路径名字符串</strong>转换为抽象路径名来创建新的 File 实例。  </li>
<li><code>public File(String parent, String child)</code> ：从<strong>父路径名字符串和子路径名字符串</strong>创建新的 File 实例。</li>
<li><code>public File(File parent, String child)</code> ：从<strong>父抽象路径名和子路径名字符串</strong>创建新的 File 实例。 </li>
</ul>
<p>注意：</p>
<ol>
<li>一个 File 对象代表硬盘中实际存在的一个文件或者目录。</li>
<li>无论该路径下是否存在文件或者目录，都不影响 File 对象的创建。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        show01();</span><br><span class="line">        show02(<span class="string">"c:\\"</span>,<span class="string">"a.txt"</span>); <span class="comment">// c:\a.txt</span></span><br><span class="line">        show02(<span class="string">"d:\\"</span>,<span class="string">"a.txt"</span>); <span class="comment">// d:\a.txt</span></span><br><span class="line">        show03();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        File(String pathname) 通过将给定路径名字符串转换为抽象路径名来创建一个新 File 实例。</span></span><br><span class="line"><span class="comment">        参数:</span></span><br><span class="line"><span class="comment">            String pathname:字符串的路径名称</span></span><br><span class="line"><span class="comment">            创建File对象,只是把字符串路径封装为File对象,不考虑路径的真假情况</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\a.txt"</span>);</span><br><span class="line">        System.out.println(f1); <span class="comment">// 重写了Object类的toString方法 C:\Users\itcast\IdeaProjects\shungyuan\a.txt</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan"</span>);</span><br><span class="line">        System.out.println(f2); <span class="comment">// C:\Users\itcast\IdeaProjects\shungyuan</span></span><br><span class="line"></span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">"b.txt"</span>);</span><br><span class="line">        System.out.println(f3); <span class="comment">// b.txt</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        File(String parent, String child) 根据 parent 路径名字符串和 child 路径名字符串创建一个新 File 实例。</span></span><br><span class="line"><span class="comment">        好处:</span></span><br><span class="line"><span class="comment">            父路径和子路径,可以单独书写,使用起来非常灵活;父路径和子路径都可以变化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show02</span><span class="params">(String parent, String child)</span> </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(parent, child);</span><br><span class="line">        System.out.println(file);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        File(File parent, String child) 根据 parent 抽象路径名和 child 路径名字符串创建一个新 File 实例。</span></span><br><span class="line"><span class="comment">        好处:</span></span><br><span class="line"><span class="comment">             父路径是File类型,可以使用File的方法对路径进行一些操作,再使用路径创建对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File parent = <span class="keyword">new</span> File(<span class="string">"c:\\"</span>);</span><br><span class="line">        File file = <span class="keyword">new</span> File(parent, <span class="string">"hello.java"</span>);</span><br><span class="line">        System.out.println(file); <span class="comment">// c:\hello.java</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><h3 id="获取功能的方法"><a href="#获取功能的方法" class="headerlink" title="获取功能的方法"></a>获取功能的方法</h3><ul>
<li><code>public String getAbsolutePath()</code> ：返回此 File 的绝对路径名字符串。</li>
<li><code>public String getPath()</code> ：将此 File 转换为路径名字符串。 </li>
<li><code>public String getName()</code>  ：返回由此 File 表示的文件或目录的名称。  </li>
<li><code>public long length()</code>  ：返回由此 File 表示的文件的长度。 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        show01();</span><br><span class="line">        show02();</span><br><span class="line">        show03();</span><br><span class="line">        show04();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public String getAbsolutePath() ：返回此File的绝对路径名字符串。</span></span><br><span class="line"><span class="comment">        获取的构造方法中传递的路径</span></span><br><span class="line"><span class="comment">        无论路径是绝对的还是相对的,getAbsolutePath方法返回的都是绝对路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\a.txt"</span>);</span><br><span class="line">        String absolutePath1 = f1.getAbsolutePath();</span><br><span class="line">        System.out.println(absolutePath1); <span class="comment">// C:\Users\itcast\IdeaProjects\shungyuan\a.txt</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        String absolutePath2 = f2.getAbsolutePath();</span><br><span class="line">        System.out.println(absolutePath2); <span class="comment">// C:\Users\itcast\IdeaProjects\shungyuan\a.txt</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public String getPath() ：将此File转换为路径名字符串。</span></span><br><span class="line"><span class="comment">        获取的构造方法中传递的路径</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        toString方法调用的就是getPath方法</span></span><br><span class="line"><span class="comment">        源码:</span></span><br><span class="line"><span class="comment">            public String toString() &#123;</span></span><br><span class="line"><span class="comment">                return getPath();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\a.txt"</span>);</span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        String path1 = f1.getPath();</span><br><span class="line">        System.out.println(path1); <span class="comment">// C:\Users\itcast\IdeaProjects\shungyuan\a.txt</span></span><br><span class="line">        String path2 = f2.getPath();</span><br><span class="line">        System.out.println(path2); <span class="comment">// a.txt</span></span><br><span class="line"></span><br><span class="line">        System.out.println(f1); <span class="comment">// C:\Users\itcast\IdeaProjects\shungyuan\a.txt</span></span><br><span class="line">        System.out.println(f1.toString()); <span class="comment">// C:\Users\itcast\IdeaProjects\shungyuan\a.txt</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public String getName()  ：返回由此File表示的文件或目录的名称。</span></span><br><span class="line"><span class="comment">        获取的就是构造方法传递路径的结尾部分(文件/文件夹)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\a.txt"</span>);</span><br><span class="line">        String name1 = f1.getName();</span><br><span class="line">        System.out.println(name1); <span class="comment">// a.txt</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan"</span>);</span><br><span class="line">        String name2 = f2.getName();</span><br><span class="line">        System.out.println(name2); <span class="comment">// shungyuan</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public long length()  ：返回由此File表示的文件的长度。</span></span><br><span class="line"><span class="comment">        获取的是构造方法指定的文件的大小,以字节为单位</span></span><br><span class="line"><span class="comment">        注意:</span></span><br><span class="line"><span class="comment">            文件夹是没有大小概念的,不能获取文件夹的大小</span></span><br><span class="line"><span class="comment">            如果构造方法中给出的路径不存在,那么length方法返回0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show04</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\develop\\a\\1.jpg"</span>);</span><br><span class="line">        <span class="keyword">long</span> l1 = f1.length();</span><br><span class="line">        System.out.println(l1); <span class="comment">// 780831字节</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"C:\\develop\\a\\2.jpg"</span>);</span><br><span class="line">        System.out.println(f2.length()); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">"C:\\develop\\a"</span>);</span><br><span class="line">        System.out.println(f3.length()); <span class="comment">// 0 文件夹没有大小概念的</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="判断功能的方法"><a href="#判断功能的方法" class="headerlink" title="判断功能的方法"></a>判断功能的方法</h3><ul>
<li><code>public boolean exists()</code> ：此 File 表示的文件或目录是否实际存在。</li>
<li><code>public boolean isDirectory()</code> ：此 File 表示的是否为目录。</li>
<li><code>public boolean isFile()</code> ：此 File 表示的是否为文件。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        show01();</span><br><span class="line">        show02();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public boolean exists() ：此File表示的文件或目录是否实际存在。</span></span><br><span class="line"><span class="comment">        用于判断构造方法中的路径是否存在</span></span><br><span class="line"><span class="comment">            存在:true</span></span><br><span class="line"><span class="comment">            不存在:false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan"</span>);</span><br><span class="line">        System.out.println(f1.exists()); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shung"</span>);</span><br><span class="line">        System.out.println(f2.exists()); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">"shungyuan.iml"</span>); <span class="comment">// 相对路径 C:\Users\itcast\IdeaProjects\shungyuan\shungyuan.iml</span></span><br><span class="line">        System.out.println(f3.exists()); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        File f4 = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        System.out.println(f4.exists()); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public boolean isDirectory() ：此File表示的是否为目录。</span></span><br><span class="line"><span class="comment">            用于判断构造方法中给定的路径是否以文件夹结尾</span></span><br><span class="line"><span class="comment">                是:true</span></span><br><span class="line"><span class="comment">                否:false</span></span><br><span class="line"><span class="comment">        public boolean isFile() ：此File表示的是否为文件。</span></span><br><span class="line"><span class="comment">            用于判断构造方法中给定的路径是否以文件结尾</span></span><br><span class="line"><span class="comment">                是:true</span></span><br><span class="line"><span class="comment">                否:false</span></span><br><span class="line"><span class="comment">        注意:</span></span><br><span class="line"><span class="comment">            电脑的硬盘中只有文件/文件夹,两个方法是互斥</span></span><br><span class="line"><span class="comment">            这两个方法使用前提,路径必须是存在的,否则都返回false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shung"</span>);</span><br><span class="line">        <span class="comment">// 不存在,就没有必要获取</span></span><br><span class="line">        System.out.println(f1.isDirectory()); <span class="comment">// false</span></span><br><span class="line">        System.out.println(f1.isFile()); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan"</span>);</span><br><span class="line">        <span class="keyword">if</span>(f2.exists()) &#123;</span><br><span class="line">            System.out.println(f2.isDirectory()); <span class="comment">// true</span></span><br><span class="line">            System.out.println(f2.isFile()); <span class="comment">// false</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\shungyuan.iml"</span>);</span><br><span class="line">        <span class="keyword">if</span>(f3.exists()) &#123;</span><br><span class="line">            System.out.println(f3.isDirectory()); <span class="comment">// false</span></span><br><span class="line">            System.out.println(f3.isFile()); <span class="comment">// true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="创建删除功能的方法"><a href="#创建删除功能的方法" class="headerlink" title="创建删除功能的方法"></a>创建删除功能的方法</h3><ul>
<li><code>public boolean createNewFile()</code> ：当且仅当具有该名称的文件尚不存在时，创建一个新的空文件。 </li>
<li><code>public boolean delete()</code> ：删除由此 File 表示的文件或目录。  </li>
<li><code>public boolean mkdir()</code> ：创建由此 File 表示的目录。</li>
<li><code>public boolean mkdirs()</code> ：创建由此 File 表示的目录，包括任何必需但不存在的父目录。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        show01();</span><br><span class="line">        show02();</span><br><span class="line">        show03();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public boolean createNewFile() ：当且仅当具有该名称的文件尚不存在时，创建一个新的空文件。</span></span><br><span class="line"><span class="comment">        创建文件的路径和名称在构造方法中给出(构造方法的参数)</span></span><br><span class="line"><span class="comment">        返回值:布尔值</span></span><br><span class="line"><span class="comment">            true:文件不存在,创建文件,返回true</span></span><br><span class="line"><span class="comment">            false:文件存在,不会创建,返回false</span></span><br><span class="line"><span class="comment">        注意:</span></span><br><span class="line"><span class="comment">            1.此方法只能创建文件,不能创建文件夹</span></span><br><span class="line"><span class="comment">            2.创建文件的路径必须存在,否则会抛出异常</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        public boolean createNewFile() throws IOException</span></span><br><span class="line"><span class="comment">        createNewFile声明抛出了IOException,我们调用这个方法,就必须的处理这个异常,要么throws,要么trycatch</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show01</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\08_FileAndRecursion\\1.txt"</span>);</span><br><span class="line">        <span class="keyword">boolean</span> b1 = f1.createNewFile();</span><br><span class="line">        System.out.println(<span class="string">"b1:"</span> + b1); <span class="comment">// b1:true</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"08_FileAndRecursion\\2.txt"</span>);</span><br><span class="line">        System.out.println(f2.createNewFile()); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">"08_FileAndRecursion\\新建文件夹"</span>);</span><br><span class="line">        System.out.println(f3.createNewFile()); <span class="comment">// true 不要被名称迷糊,要看类型,是一个文件</span></span><br><span class="line"></span><br><span class="line">        File f4 = <span class="keyword">new</span> File(<span class="string">"08_File\\3.txt"</span>);</span><br><span class="line">        System.out.println(f4.createNewFile()); <span class="comment">// 路径不存在,抛出IOException</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       public boolean mkdir() ：创建单级空文件夹</span></span><br><span class="line"><span class="comment">       public boolean mkdirs() ：既可以创建单级空文件夹,也可以创建多级文件夹</span></span><br><span class="line"><span class="comment">       创建文件夹的路径和名称在构造方法中给出(构造方法的参数)</span></span><br><span class="line"><span class="comment">        返回值:布尔值</span></span><br><span class="line"><span class="comment">            true:文件夹不存在,创建文件夹,返回true</span></span><br><span class="line"><span class="comment">            false:文件夹存在,不会创建,返回false</span></span><br><span class="line"><span class="comment">        注意:</span></span><br><span class="line"><span class="comment">            此方法只能创建文件夹,不能创建文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"08_FileAndRecursion\\aaa"</span>);</span><br><span class="line">        <span class="keyword">boolean</span> b1 = f1.mkdir();</span><br><span class="line">        System.out.println(<span class="string">"b1:"</span> + b1); <span class="comment">// b1:true</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"08_FileAndRecursion\\111\\222\\333\\444"</span>);</span><br><span class="line">        <span class="keyword">boolean</span> b2 = f2.mkdirs();</span><br><span class="line">        System.out.println(<span class="string">"b2:"</span> + b2); <span class="comment">// b2:true</span></span><br><span class="line"></span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">"08_FileAndRecursion\\abc.txt"</span>);</span><br><span class="line">        <span class="keyword">boolean</span> b3 = f3.mkdirs(); <span class="comment">// 看类型,是一个文件夹</span></span><br><span class="line">        System.out.println(<span class="string">"b3:"</span> + b3); <span class="comment">// b3:true</span></span><br><span class="line"></span><br><span class="line">        File f4 = <span class="keyword">new</span> File(<span class="string">"08_F\\ccc"</span>);</span><br><span class="line">        <span class="keyword">boolean</span> b4 = f4.mkdirs(); <span class="comment">// 不会抛出异常,路径不存在,也会创建</span></span><br><span class="line">        System.out.println(<span class="string">"b4:"</span> + b4); <span class="comment">// b4:true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public boolean delete() ：删除由此File表示的文件或目录。</span></span><br><span class="line"><span class="comment">        此方法,可以删除构造方法路径中给出的文件/文件夹</span></span><br><span class="line"><span class="comment">        返回值:布尔值</span></span><br><span class="line"><span class="comment">            true:文件/文件夹删除成功,返回true</span></span><br><span class="line"><span class="comment">            false:文件夹中有内容,不会删除返回false;构造方法中路径不存在返回false</span></span><br><span class="line"><span class="comment">        注意:</span></span><br><span class="line"><span class="comment">            delete方法是直接在硬盘删除文件/文件夹,不走回收站,删除要谨慎</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"08_FileAndRecursion\\新建文件夹"</span>);</span><br><span class="line">        <span class="keyword">boolean</span> b1 = f1.delete();</span><br><span class="line">        System.out.println(<span class="string">"b1:"</span> + b1); <span class="comment">// b1:true</span></span><br><span class="line"></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"08_FileAndRecursion\\abc.txt"</span>);</span><br><span class="line">        System.out.println(f2.delete()); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="目录的遍历"><a href="#目录的遍历" class="headerlink" title="目录的遍历"></a>目录的遍历</h2><ul>
<li><code>public String[] list()</code> ：返回一个 String 数组，表示该 File 目录中的所有子文件或目录。</li>
<li><code>public File[] listFiles()</code> ：返回一个 File 数组，表示该 File 目录中的所有的子文件或目录。  </li>
</ul>
<p>注意：</p>
<ol>
<li>如果构造方法中给出的目录的路径不存在，会抛出空指针异常</li>
<li>如果构造方法中给出的路径不是一个目录，也会抛出空指针异常</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        show01();</span><br><span class="line">        show02();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public String[] list() ：返回一个String数组，表示该File目录中的所有子文件或目录。</span></span><br><span class="line"><span class="comment">        遍历构造方法中给出的目录,会获取目录中所有文件/文件夹的名称,把获取到的多个名称存储到一个String类型的数组中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// File file = new File("C:\\Users\\itcast\\IdeaProjects\\shungyuan\\08_FileAndRecursion\\1.txt"); // NullPointerException</span></span><br><span class="line">        <span class="comment">// File file = new File("C:\\Users\\itcast\\IdeaProjects\\shungyuan\\08_Fi"); // NullPointerException</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\08_FileAndRecursion"</span>);</span><br><span class="line">        String[] arr = file.list();</span><br><span class="line">        <span class="keyword">for</span> (String fileName : arr) &#123;</span><br><span class="line">            System.out.println(fileName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        public File[] listFiles() ：返回一个File数组，表示该File目录中的所有的子文件或目录。</span></span><br><span class="line"><span class="comment">        遍历构造方法中给出的目录,会获取目录中所有的文件/文件夹,把文件/文件夹封装为File对象,多个File对象存储到File数组中</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"C:\\Users\\itcast\\IdeaProjects\\shungyuan\\08_FileAndRecursion"</span>);</span><br><span class="line">        File[] files = file.listFiles();</span><br><span class="line">        <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">            System.out.println(f);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h1><h2 id="递归概述"><a href="#递归概述" class="headerlink" title="递归概述"></a>递归概述</h2><ul>
<li><strong>递归</strong>：指在当前方法内调用自己的这种现象。</li>
<li><strong>递归的分类:</strong> <ul>
<li>直接递归：方法自身调用自己。</li>
<li>间接递归：可以 A 方法调用 B 方法，B 方法调用 C 方法，C 方法调用 A 方法。</li>
</ul>
</li>
<li><strong>注意事项</strong>：<ul>
<li>递归一定要有条件限定，保证递归能够停止下来，否则会发生栈内存溢出。</li>
<li>在递归中虽然有限定条件，但是递归次数不能太多，否则也会发生栈内存溢出。</li>
<li>构造方法，禁止递归。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01Recurison</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// a();</span></span><br><span class="line">        b(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        递归一定要有条件限定，保证递归能够停止下来，否则会发生栈内存溢出。</span></span><br><span class="line"><span class="comment">        Exception in thread "main" java.lang.StackOverflowError</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"a方法!"</span>);</span><br><span class="line">        a();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">		在递归中虽然有限定条件，但是递归次数不能太多。否则也会发生栈内存溢出。</span></span><br><span class="line"><span class="comment">		11157 Exception in thread "main" java.lang.StackOverflowError</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">b</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        <span class="keyword">if</span>(i == <span class="number">20000</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// 结束方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        b(++i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        构造方法,禁止递归</span></span><br><span class="line"><span class="comment">        编译报错:构造方法是创建对象使用的,一直递归会导致内存中有无数多个对象,直接编译报错</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Demo01Recurison</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Demo01Recurison();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="递归执行过程"><a href="#递归执行过程" class="headerlink" title="递归执行过程"></a>递归执行过程</h2><h3 id="递归累加求和"><a href="#递归累加求和" class="headerlink" title="递归累加求和"></a>递归累加求和</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiGuiDemo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 计算1~n的和，使用递归完成</span></span><br><span class="line">		<span class="keyword">int</span> n = <span class="number">5</span>;</span><br><span class="line">      	<span class="comment">// 调用求和的方法</span></span><br><span class="line">		<span class="keyword">int</span> sum = getSum(n);</span><br><span class="line">      	<span class="comment">// 输出结果</span></span><br><span class="line">		System.out.println(sum);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        定义一个方法,使用递归计算1-n之间的和</span></span><br><span class="line"><span class="comment">        1+2+3+...+n</span></span><br><span class="line"><span class="comment">        n+(n-1)+(n-2)+...+1</span></span><br><span class="line"><span class="comment">        已知:</span></span><br><span class="line"><span class="comment">            最大值:n</span></span><br><span class="line"><span class="comment">            最小值:1</span></span><br><span class="line"><span class="comment">        使用递归必须明确:</span></span><br><span class="line"><span class="comment">            1.递归的结束条件</span></span><br><span class="line"><span class="comment">                获取到1的时候结束</span></span><br><span class="line"><span class="comment">            2.递归的目的</span></span><br><span class="line"><span class="comment">                获取下一个被加的数字(n-1)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取到1的时候结束</span></span><br><span class="line">		<span class="keyword">if</span>(num == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">// 获取下一个被加的数字(n-1)</span></span><br><span class="line">		<span class="keyword">return</span> num + getSum(num-<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="代码执行图解"><a href="#代码执行图解" class="headerlink" title="代码执行图解"></a>代码执行图解</h3><p><img src="/2020/02/20/java-advanced-4/递归累和.jpg" alt></p>
<h3 id="递归求阶乘"><a href="#递归求阶乘" class="headerlink" title="递归求阶乘"></a>递归求阶乘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    练习:</span></span><br><span class="line"><span class="comment">        使用递归计算阶乘</span></span><br><span class="line"><span class="comment">        n的阶乘：n! = n * (n-1) *...* 3 * 2 * 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo03Recurison</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> jiecheng = jc(<span class="number">5</span>);</span><br><span class="line">        System.out.println(jiecheng);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        定义方法使用递归计算阶乘</span></span><br><span class="line"><span class="comment">        5的阶乘: 5! = 5*(5-1)*(5-2)*(5-3)*(5-4)=5*4*3*2*1</span></span><br><span class="line"><span class="comment">        递归结束的条件</span></span><br><span class="line"><span class="comment">            获取到1的时候结束</span></span><br><span class="line"><span class="comment">        递归的目的</span></span><br><span class="line"><span class="comment">            获取下一个被乘的数字(n-1)</span></span><br><span class="line"><span class="comment">        方法的参数发生变化</span></span><br><span class="line"><span class="comment">            5,4,3,2,1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">jc</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取到1的时候结束</span></span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取下一个被乘的数字(n-1)</span></span><br><span class="line">        <span class="keyword">return</span> n * jc(n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="递归打印多级目录"><a href="#递归打印多级目录" class="headerlink" title="递归打印多级目录"></a>递归打印多级目录</h3><p><strong>分析</strong>：多级目录的打印，就是目录的嵌套。遍历之前，无从知道到底有多少级目录，所以我们还是要使用递归实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    练习:</span></span><br><span class="line"><span class="comment">        递归打印多级目录</span></span><br><span class="line"><span class="comment">    需求:</span></span><br><span class="line"><span class="comment">        遍历c:\\abc文件夹,及abc文件夹的子文件夹</span></span><br><span class="line"><span class="comment">        c:\\abc</span></span><br><span class="line"><span class="comment">        c:\\abc\\abc.txt</span></span><br><span class="line"><span class="comment">        c:\\abc\\abc.java</span></span><br><span class="line"><span class="comment">        c:\\abc\\a</span></span><br><span class="line"><span class="comment">        c:\\abc\\a\\a.jpg</span></span><br><span class="line"><span class="comment">        c:\\abc\\a\\a.java</span></span><br><span class="line"><span class="comment">        c:\\abc\\b</span></span><br><span class="line"><span class="comment">        c:\\abc\\b\\b.java</span></span><br><span class="line"><span class="comment">        c:\\abc\\b\\b.txt</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoRecurison</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"c:\\abc"</span>);</span><br><span class="line">        getAllFile(file);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        定义一个方法,参数传递File类型的目录</span></span><br><span class="line"><span class="comment">        方法中对目录进行遍历</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAllFile</span><span class="params">(File dir)</span></span>&#123;</span><br><span class="line">        File[] files = dir.listFiles();</span><br><span class="line">        <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">            <span class="comment">// 对遍历得到的File对象f进行判断,判断是否是文件夹</span></span><br><span class="line">            <span class="keyword">if</span>(f.isDirectory()) &#123;</span><br><span class="line">                System.out.println(f); <span class="comment">// 打印此文件夹名称</span></span><br><span class="line">                <span class="comment">// f是一个文件夹,则继续遍历这个文件夹</span></span><br><span class="line">                <span class="comment">// 我们发现getAllFile方法就是传递文件夹,遍历文件夹的方法</span></span><br><span class="line">                <span class="comment">// 所以直接调用getAllFile方法即可:递归(自己调用自己)</span></span><br><span class="line">                getAllFile(f);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//f是一个文件,直接打印即可</span></span><br><span class="line">                System.out.println(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="文件搜索"><a href="#文件搜索" class="headerlink" title="文件搜索"></a>文件搜索</h3><p>搜索 <code>c:\\abc</code> 目录中的 <code>.java</code> 文件。</p>
<p><strong>分析</strong>：</p>
<ol>
<li>目录搜索，无法判断多少级目录，所以使用递归，遍历所有目录。</li>
<li>遍历目录时，获取的子文件，通过文件名称，判断是否符合条件。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo05Recurison</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"c:\\abc"</span>);</span><br><span class="line">        getAllFile(file);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        定义一个方法,参数传递File类型的目录</span></span><br><span class="line"><span class="comment">        方法中对目录进行遍历</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAllFile</span><span class="params">(File dir)</span></span>&#123;</span><br><span class="line">      	<span class="comment">// 获取子文件和目录</span></span><br><span class="line">        File[] files = dir.listFiles();</span><br><span class="line">      	<span class="comment">// 循环打印</span></span><br><span class="line">        <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">            <span class="comment">// 对遍历得到的File对象f进行判断,判断是否是文件</span></span><br><span class="line">            <span class="keyword">if</span> (f.isFile()) &#123;</span><br><span class="line">              	<span class="comment">// 是文件，判断文件名并输出文件绝对路径</span></span><br><span class="line">                <span class="keyword">if</span> (f.getName().toLowerCase().endsWith(<span class="string">".java"</span>)) &#123;</span><br><span class="line">                    System.out.println(f);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 是目录，继续遍历,形成递归</span></span><br><span class="line">                getAllFile(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h1><p>在 <code>File</code> 类中有两个和 <code>file[] ListFiles()</code> 重载的方法，方法的参数传递的就是<strong>过滤器</strong>：</p>
<ol>
<li><code>File[] listFiles(FileFilter filter)</code> ；</li>
<li><code>File[] listFiles(FilenameFilter filter)</code> 。</li>
</ol>
<h2 id="FileFilter-接口"><a href="#FileFilter-接口" class="headerlink" title="FileFilter 接口"></a><code>FileFilter</code> 接口</h2><p> <code>java.io.FileFilter</code> 是一个接口，是用于抽象路径名（File 对象）的过滤器。接口中只有一个抽象方法：</p>
<ul>
<li><code>boolean accept(File pathname)</code> ：测试指定抽象路径名是否应该包含在某个路径名列表中。</li>
<li>参数 <code>File pathname</code> ：使用 <code>ListFiles</code> 方法遍历目录得到的每一个文件对象。</li>
</ul>
<h2 id="FilenameFilter-接口"><a href="#FilenameFilter-接口" class="headerlink" title="FilenameFilter 接口"></a><code>FilenameFilter</code> 接口</h2><p> <code>java.io.FilenameFilter</code> 接口：实现此接口的类实例可用于过滤器文件名。接口中只有一个抽象方法：</p>
<ul>
<li><code>boolean accept(File dir, String name)</code> ：测试指定文件是否应该包含在某一文件列表中。</li>
<li>参数：<ul>
<li><code>File dir</code> ：构造方法中传递的被遍历的目录</li>
<li><code>String name</code> ：使用 <code>ListFiles</code> 方法遍历目录获取的每一个文件/文件夹的名称</li>
</ul>
</li>
</ul>
<p>注意：两个过滤器接口是没有实现类的，需要我们自己写实现类，重写过滤的方法 <code>accept()</code>，在方法中自己定义过滤的规则。</p>
<h2 id="过滤器优化文件搜索"><a href="#过滤器优化文件搜索" class="headerlink" title="过滤器优化文件搜索"></a>过滤器优化文件搜索</h2><p>使用 <code>FileFilter</code> 接口：</p>
<ol>
<li>使用需要传递子类对象，重写其中方法。选择匿名内部类方式，比较简单。</li>
<li><code>accept</code> 方法，参数为 <code>File</code>，表示当前 File 下所有的子文件和子目录。保留住则返回 true，过滤掉则返回 false。保留规则：<ol>
<li>要么是 <code>.java</code> 文件。</li>
<li>要么是目录，用于继续遍历。</li>
</ol>
</li>
<li>通过过滤器的作用，<code>listFiles(FileFilter)</code> 返回的数组元素中，子文件对象都是符合条件的，可以直接打印。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFilter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"c:\\abc"</span>);</span><br><span class="line">        getAllFile(file);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAllFile</span><span class="params">(File dir)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 传递过滤器对象 使用匿名内部类</span></span><br><span class="line">        File[] files = dir.listFiles(<span class="keyword">new</span> FileFilter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File pathname)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// 过滤规则,pathname是文件夹或者是.java结尾的文件返回true</span></span><br><span class="line">                <span class="keyword">return</span> pathname.isDirectory() || pathname.getName().toLowerCase().endsWith(<span class="string">".java"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">            <span class="keyword">if</span>(f.isDirectory()) &#123;</span><br><span class="line">                getAllFile(f);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用 <code>FilenameFilter</code> 接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo02Filter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"c:\\abc"</span>);</span><br><span class="line">        getAllFile(file);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAllFile</span><span class="params">(File dir)</span></span>&#123;</span><br><span class="line">        File[] files = dir.listFiles(<span class="keyword">new</span> FilenameFilter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// 过滤规则,pathname是文件夹或者是.java结尾的文件返回true</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> File(dir, name).isDirectory() || name.toLowerCase().endsWith(<span class="string">".java"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">            <span class="keyword">if</span>(f.isDirectory()) &#123;</span><br><span class="line">                getAllFile(f);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="FileFilter-过滤器的原理"><a href="#FileFilter-过滤器的原理" class="headerlink" title="FileFilter 过滤器的原理"></a><code>FileFilter</code> 过滤器的原理</h2><p><img src="/2020/02/20/java-advanced-4/FileFilter过滤器的原理.png" alt></p>
<h2 id="Lambda-优化"><a href="#Lambda-优化" class="headerlink" title="Lambda 优化"></a>Lambda 优化</h2><p> <code>FileFilter</code> 和 <code>FilenameFilter</code> 都是只有一个方法的接口，因此可以用 Lambda 表达式简写。</p>
<p>Lambda格式：<code>() -&gt; {}</code> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAllFile</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 使用Lambda表达式优化匿名内部类(接口中只有一个抽象方法)</span></span><br><span class="line">    <span class="comment">/*File[] files = dir.listFiles((File pathname)-&gt;&#123;</span></span><br><span class="line"><span class="comment">        return pathname.isDirectory() || pathname.getName().toLowerCase().endsWith(".java");</span></span><br><span class="line"><span class="comment">    &#125;);*/</span></span><br><span class="line">    File[] files = dir.listFiles(pathname -&gt; pathname.isDirectory() || pathname.getName().toLowerCase().endsWith(<span class="string">".java"</span>))</span><br><span class="line">  	</span><br><span class="line">    <span class="comment">// 循环打印</span></span><br><span class="line">    <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">        <span class="keyword">if</span> (f.isFile()) &#123;</span><br><span class="line">            System.out.println(f);</span><br><span class="line">      	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        	getAllFile(f);</span><br><span class="line">      	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="IO-概述"><a href="#IO-概述" class="headerlink" title="IO 概述"></a>IO 概述</h1><h2 id="什么是-IO"><a href="#什么是-IO" class="headerlink" title="什么是 IO"></a>什么是 IO</h2><p>数据都是在哪些设备上的呢？键盘、内存、硬盘、外接设备等等。</p>
<p>我们把数据的传输，可以看做是一种数据的流动，按照流动的方向，以内存为基准，分为 <code>输入(input)</code> 和 <code>输出(output)</code> ，即流向内存是<strong>输入流</strong>，流出内存的输出流。</p>
<p>Java中 I/O 操作主要是指使用 <code>java.io</code> 包下的内容，进行输入、输出操作。<strong>输入</strong>也叫做<strong>读取</strong>数据，<strong>输出</strong>也叫做作<strong>写出</strong>数据。</p>
<h2 id="IO-的分类"><a href="#IO-的分类" class="headerlink" title="IO 的分类"></a>IO 的分类</h2><p>根据数据的流向分为：<strong>输入流</strong>和<strong>输出流</strong>。</p>
<ul>
<li><strong>输入流</strong> ：把数据从<code>其他设备</code>上读取到<code>内存</code>中的流。 </li>
<li><strong>输出流</strong> ：把数据从<code>内存</code> 中写出到<code>其他设备</code>上的流。</li>
</ul>
<p>格局数据的类型分为：<strong>字节流</strong>和<strong>字符流</strong>。</p>
<ul>
<li><strong>字节流</strong> ：以字节为单位，读写数据的流。</li>
<li><strong>字符流</strong> ：以字符为单位，读写数据的流。</li>
</ul>
<h2 id="IO-的流向"><a href="#IO-的流向" class="headerlink" title="IO 的流向"></a>IO 的流向</h2><p><img src="/2020/02/20/java-advanced-4/IO流的概念和分类.png" alt></p>
<h1 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h1><h2 id="一切皆为字节"><a href="#一切皆为字节" class="headerlink" title="一切皆为字节"></a>一切皆为字节</h2><p>一切文件数据（文本、图片、视频等）在存储时，都是以二进制数字的形式保存，都一个一个的字节，那么传输时一样如此。所以，字节流可以传输任意文件数据。在操作流的时候，我们要时刻明确，无论使用什么样的流对象，底层传输的始终为<strong>二进制数据</strong>。</p>
<h2 id="OutputStream-字节输出流"><a href="#OutputStream-字节输出流" class="headerlink" title="OutputStream 字节输出流"></a><code>OutputStream</code> 字节输出流</h2><p> <strong><code>java.io.OutputStream</code> 抽象类</strong>是表示<strong>字节输出流</strong>的所有类的超类，将指定的字节信息写出到目的地。它定义了字节输出流的基本共性功能方法。</p>
<ul>
<li><code>public void close()</code> ：关闭此输出流并释放与此流相关联的任何系统资源。  </li>
<li><code>public void flush()</code> ：刷新此输出流并强制任何缓冲的输出字节被写出。  </li>
<li><code>public void write(byte[] b)</code> ：将 b.length 字节从指定的字节数组写入此输出流。  </li>
<li><code>public void write(byte[] b, int off, int len)</code> ：从指定的字节数组写入 len 字节，从偏移量 off 开始输出到此输出流。  </li>
<li><code>public void write(int b)</code> ：将指定的字节写入此输出流。</li>
</ul>
<h2 id="FileOutputStream-文件字节输出流"><a href="#FileOutputStream-文件字节输出流" class="headerlink" title="FileOutputStream 文件字节输出流"></a><code>FileOutputStream</code> 文件字节输出流</h2><p> <code>OutputStream</code> 有很多子类， <code>java.io.FileOutputStream</code> 类是<strong>文件字节输出流</strong>，用于将内存中的数据写入到硬盘的文件中。</p>
<h3 id="构造方法-1"><a href="#构造方法-1" class="headerlink" title="构造方法"></a>构造方法</h3><p> <code>FileOutputStream</code> 类的一个参数的构造方法有：</p>
<ul>
<li><code>public FileOutputStream(File file)</code> ：创建一个向<strong>指定 File 对象</strong>表示的文件中写入数据的文件输出流。</li>
<li><code>public FileOutputStream(String name)</code>：创建一个向具有<strong>指定名称</strong>的文件中写入数据的输出文件流。</li>
</ul>
<p>当创建一个输出流对象时，必须传入一个文件路径：</p>
<ul>
<li>该路径下，如果没有这个文件，会创建该文件。</li>
<li>如果有这个文件，会清空这个文件的数据。</li>
</ul>
<p>构造方法的作用：</p>
<ol>
<li>创建一个 <code>FileOutputStream</code> 对象；</li>
<li>会根据构造方法中传递的文件 / 文件路径，创建一个空的文件；</li>
<li>会把 <code>FileOutputStream</code> 对象指向创建好的文件。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileOutputStreamConstructor</span> <span class="title">throws</span> <span class="title">IOException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 使用File对象创建流对象</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"b.txt"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="写入字节数据"><a href="#写入字节数据" class="headerlink" title="写入字节数据"></a>写入字节数据</h3><p>写入数据的原理（内存 → 硬盘）：</p>
<ul>
<li>Java 程序 → JVM → OS（操作系统） → OS 调用写数据的方法 → 把数据写入到文件中</li>
</ul>
<p>字节输出流的使用步骤：</p>
<ol>
<li>创建一个 <code>FileOutputStream</code> 对象，构造方法中传递写入数据的目的地；</li>
<li>调用 <code>FileOutputStream</code> 对象中的方法 <code>write</code>，把数据写入到文件中；</li>
<li>释放资源（流使用会占用一定的内存，使用完毕要把内存清空，提供程序的效率）。</li>
</ol>
<h4 id="写入一个字节"><a href="#写入一个字节" class="headerlink" title="写入一个字节"></a>写入一个字节</h4><p> <code>write(int b)</code> 方法，每次可以写入一个字节数据。虽然参数为 int 类型四个字节，但是只会保留一个字节的信息写出。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoOutputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"a.txt"</span>);</span><br><span class="line">        fos.write(<span class="number">97</span>); <span class="comment">// a</span></span><br><span class="line">        fos.write(<span class="number">98</span>); <span class="comment">// b</span></span><br><span class="line">        fos.write(<span class="number">99</span>); <span class="comment">// c</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="文件存储的原理"><a href="#文件存储的原理" class="headerlink" title="文件存储的原理"></a>文件存储的原理</h4><p><img src="/2020/02/20/java-advanced-4/文件存储的原理和记事本打开文件的原理.png" alt></p>
<h4 id="写入字节数组"><a href="#写入字节数组" class="headerlink" title="写入字节数组"></a>写入字节数组</h4><ul>
<li><code>public void write(byte[] b)</code> ：将 <code>b.length</code> 字节从指定的字节数组写入此输出流。</li>
<li><code>public void write(byte[] b, int off, int len)</code> ：从指定的字节数组写入 <code>len</code> 字节，从偏移量 <code>off</code> 开始输出到此输出流。</li>
</ul>
<p>注意：</p>
<ul>
<li>如果写的第一个字节是<strong>正数</strong>（0-127），那么显示的时候会查询 ASCII 表。</li>
<li>如果写的第一个字节是<strong>负数</strong>，那第一个字节和第二个字节这两个字节组成一个中文显示，查询系统默认码表（GBK）。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo02OutputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"b.txt"</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            public void write(byte[] b)：将 b.length字节从指定的字节数组写入此输出流。</span></span><br><span class="line"><span class="comment">            一次写多个字节:</span></span><br><span class="line"><span class="comment">                如果写的第一个字节是正数(0-127),那么显示的时候会查询ASCII表</span></span><br><span class="line"><span class="comment">                如果写的第一个字节是负数,那第一个字节会和第二个字节,两个字节组成一个中文显示,查询系统默认码表(GBK)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = &#123;<span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>&#125;; <span class="comment">// ABCDE</span></span><br><span class="line">        <span class="comment">// byte[] bytes = &#123;-65, -66, -67, 68, 69&#125;; // 烤紻E</span></span><br><span class="line">        fos.write(bytes);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            public void write(byte[] b, int off, int len) ：把字节数组的一部分写入到文件中</span></span><br><span class="line"><span class="comment">                int off:数组的开始索引</span></span><br><span class="line"><span class="comment">                int len:写几个字节</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        fos.write(bytes, <span class="number">1</span>, <span class="number">2</span>); <span class="comment">// BC</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            写入字符的方法:可以使用String类中的方法把字符串,转换为字节数组</span></span><br><span class="line"><span class="comment">                byte[] getBytes()  把字符串转换为字节数组</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes2 = <span class="string">"你好"</span>.getBytes();</span><br><span class="line">        System.out.println(Arrays.toString(bytes2)); <span class="comment">// [-28, -67, -96, -27, -91, -67]</span></span><br><span class="line">        fos.write(bytes2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据追加续写"><a href="#数据追加续写" class="headerlink" title="数据追加续写"></a>数据追加续写</h4><p>文件的追加续写使用两个参数的构造方法：</p>
<ul>
<li><code>public FileOutputStream(File file, boolean append)</code> ：创建文件输出流以写入由指定的 File 对象表示的文件。</li>
<li><code>public FileOutputStream(String name, boolean append)</code> ：创建文件输出流以指定的名称写入文件。</li>
</ul>
<p>这两个构造方法，参数中都需要传入一个 <code>boolean</code> 类型的值：</p>
<ul>
<li><code>true</code> ：创建对象不会覆盖源文件，继续在文件的末尾追加写数据</li>
<li><code>false</code> ：创建一个新文件，覆盖源文件。</li>
</ul>
<p>这样创建的输出流对象，就可以指定是否追加续写了。</p>
<h4 id="写入换行"><a href="#写入换行" class="headerlink" title="写入换行"></a>写入换行</h4><ul>
<li>回车符 <code>\r</code> 和换行符 <code>\n</code> ：<ul>
<li>回车符：回到一行的开头（return）。</li>
<li>换行符：下一行（newline）。</li>
</ul>
</li>
<li>系统中的换行：<ul>
<li>Windows 系统里，每行结尾是 <code>回车+换行</code> ，即 <code>\r\n</code>；</li>
<li>Linux 系统里，每行结尾只有 <code>换行</code> ，即 <code>/n</code>；</li>
<li>Mac 系统里，每行结尾是 <code>回车</code> ，即 <code>/r</code>。从 Mac OS X 开始与 Linux 统一。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FOSWrite</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"fos.txt"</span>);  </span><br><span class="line">      	<span class="keyword">byte</span>[] words = &#123;<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>,<span class="number">100</span>,<span class="number">101</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.length; i++) &#123;</span><br><span class="line">          	<span class="comment">// 写出一个字节</span></span><br><span class="line">            fos.write(words[i]);</span><br><span class="line">          	<span class="comment">// 写出一个换行, 换行符号转成字节数组写入</span></span><br><span class="line">            fos.write(<span class="string">"\r\n"</span>.getBytes());</span><br><span class="line">        &#125;</span><br><span class="line">      	<span class="comment">// 关闭资源</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br></pre></td></tr></table></figure>
<h2 id="InputStream-字节输入流"><a href="#InputStream-字节输入流" class="headerlink" title="InputStream 字节输入流"></a><code>InputStream</code> 字节输入流</h2><p> <strong><code>java.io.InputStream</code> 抽象类</strong>是表示<strong>字节输入流</strong>的所有类的超类，可以读取字节信息到内存中。它定义了字节输入流的基本共性功能方法。</p>
<ul>
<li><code>public void close()</code> ：关闭此输入流并释放与此流相关联的所有系统资源。</li>
<li><code>public int read()</code> ：从输入流读取数据的下一个字节。 </li>
<li><code>public int read(byte[] b)</code> ：从输入流中读取一定数量的字节，并将其存储在缓冲区数组 b 中。</li>
</ul>
<h2 id="FileInputStream-文件字节输入流"><a href="#FileInputStream-文件字节输入流" class="headerlink" title="FileInputStream 文件字节输入流"></a><code>FileInputStream</code> 文件字节输入流</h2><p> <code>java.io.FileInputStream</code> 类是<strong>文件字节输入流</strong>，把硬盘文件中的数据，读取到内存中使用。</p>
<h3 id="构造方法-2"><a href="#构造方法-2" class="headerlink" title="构造方法"></a>构造方法</h3><ul>
<li><code>FileInputStream(File file)</code> ：通过打开与实际文件的连接来创建一个 <code>FileInputStream</code> 对象，该文件由文件系统中的 File 对象 file 命名。</li>
<li><code>FileInputStream(String name)</code> ：通过打开与实际文件的连接来创建一个 <code>FileInputStream</code> 对象，该文件由文件系统中的路径名 name 命名。</li>
</ul>
<p>当创建一个输入流对象时，必须传入一个文件路径。该路径下，如果没有该文件，会抛出 <code>FileNotFoundException</code> 。</p>
<p>构造方法的作用：</p>
<ol>
<li>会创建一个 <code>FileInputStream</code> 对象；</li>
<li>会把 <code>FileInputStream</code> 对象指向构造方法中要读取的文件。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileInputStreamConstructor</span> <span class="title">throws</span> <span class="title">IOException</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 使用File对象创建流对象</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="读取字节数据"><a href="#读取字节数据" class="headerlink" title="读取字节数据"></a>读取字节数据</h3><p>读取数据的原理（硬盘 → 内存）：</p>
<ul>
<li>Java 程序 → JVM → OS（操作系统） → OS 调用写数据的方法 → 把数据写入到文件中</li>
</ul>
<p>字节输入流的使用步骤：</p>
<ol>
<li>创建 <code>FileInputStream</code> 对象，构造方法中绑定要读取的数据源；</li>
<li>使用 <code>FileInputStream</code> 对象中的方法 <code>read</code>，读取文件；</li>
<li>释放资源。</li>
</ol>
<h4 id="读取一个字节"><a href="#读取一个字节" class="headerlink" title="读取一个字节"></a>读取一个字节</h4><p> <code>int read()</code> 方法，每次读取一个字节的数据并返回，提升为 int 类型，读取到文件末尾则返回 <code>-1</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoInputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"c.txt"</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            不知道文件中有多少字节,使用while循环</span></span><br><span class="line"><span class="comment">            while循环结束条件,读取到-1的时候结束</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            布尔表达式(len = fis.read())!=-1</span></span><br><span class="line"><span class="comment">                1.fis.read():读取一个字节</span></span><br><span class="line"><span class="comment">                2.len = fis.read():把读取到的字节赋值给变量len</span></span><br><span class="line"><span class="comment">                3.(len = fis.read())!=-1:判断变量len是否不等于-1</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>; <span class="comment">// 记录读取到的字节</span></span><br><span class="line">        <span class="keyword">while</span>((len = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>)len);</span><br><span class="line">        &#125;</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="读取字节数组"><a href="#读取字节数组" class="headerlink" title="读取字节数组"></a>读取字节数组</h4><p> <code>int read(byte[] b)</code> 方法，一次读取多个字节。明确两件事情：</p>
<ol>
<li>方法的参数 <code>byte[]</code> 的作用？<ul>
<li>起到<strong>缓冲作用，存储每次读取到的多个字节</strong>。</li>
<li>数组的长度一般定义为 1024 (1kB) 或者 1024 的整数倍。</li>
</ul>
</li>
<li>方法的返回值 <code>int</code> 是什么？<ul>
<li>每次<strong>读取到的有效字节个数</strong>。</li>
<li>读取到文件末尾时，返回 <code>-1</code>。</li>
</ul>
</li>
</ol>
<p> <code>String</code> 类的构造方法：</p>
<ul>
<li><code>String(byte[] bytes)</code> ：把字节数组转换为字符串。</li>
<li><code>String(byte[] bytes, int offset, int length)</code> ：把字节数组的一部分转换为字符串。<ul>
<li><code>offset</code> ：数组的开始转换索引。</li>
<li><code>length</code> ：转换的字节个数。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoInputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"b.txt"</span>); <span class="comment">// ABCDE</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用FileInputStream对象中的方法read读取文件</span></span><br><span class="line">        <span class="comment">// int read(byte[] b) 从输入流中读取一定数量的字节，并将其存储在缓冲区数组 b 中。</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">int</span> len = fis.read(bytes);</span><br><span class="line">        System.out.println(len); <span class="comment">// 2</span></span><br><span class="line">        <span class="comment">// System.out.println(Arrays.toString(bytes)); // [65, 66]</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(bytes)); <span class="comment">// AB</span></span><br><span class="line"></span><br><span class="line">        len = fis.read(bytes);</span><br><span class="line">        System.out.println(len); <span class="comment">// 2</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(bytes)); <span class="comment">// CD</span></span><br><span class="line"></span><br><span class="line">        len = fis.read(bytes);</span><br><span class="line">        System.out.println(len); <span class="comment">// 1</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(bytes)); <span class="comment">// ED</span></span><br><span class="line"></span><br><span class="line">        len = fis.read(bytes);</span><br><span class="line">        System.out.println(len); <span class="comment">// -1</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(bytes)); <span class="comment">// ED</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            发现以上读取时一个重复的过程,可以使用循环优化</span></span><br><span class="line"><span class="comment">            不知道文件中有多少字节,所以使用while循环</span></span><br><span class="line"><span class="comment">            while循环结束的条件,读取到-1结束</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; <span class="comment">// 存储读取到的多个字节</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>; <span class="comment">// 记录每次读取的有效字节个数</span></span><br><span class="line">        <span class="keyword">while</span>((len = fis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// String(byte[] bytes, int offset, int length) 把字节数组的一部分转换为字符串</span></span><br><span class="line">            System.out.print(<span class="keyword">new</span> String(bytes, <span class="number">0</span>, len)); <span class="comment">// ABCDE</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="字节流读取文件的原理"><a href="#字节流读取文件的原理" class="headerlink" title="字节流读取文件的原理"></a>字节流读取文件的原理</h4><p><img src="/2020/02/20/java-advanced-4/字节流读取文件的原理.png" alt></p>
<h2 id="案例：文件复制"><a href="#案例：文件复制" class="headerlink" title="案例：文件复制"></a>案例：文件复制</h2><p>文件复制：</p>
<ol>
<li>创建一个字节输入流对象，构造方法中绑定要读取的数据源；</li>
<li>创建一个字节输出流对象，构造方法中绑定要写入的目的地；</li>
<li>使用字节输入流对象中的方法 <code>read</code> 读取文件；</li>
<li>使用字节输出流中的方法 <code>write</code>，把读取到的字节写入到目的地的文件中；</li>
<li>释放资源。</li>
</ol>
<p><img src="/2020/02/20/java-advanced-4/文件复制的原理.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    文件复制练习:一读一写</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoCopyFile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> s = System.currentTimeMillis();</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"c:\\1.jpg"</span>);</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"d:\\1.jpg"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 一次读取一个字节写入一个字节的方式</span></span><br><span class="line">        <span class="comment">/*int len = 0;</span></span><br><span class="line"><span class="comment">        while((len = fis.read())!=-1)&#123;</span></span><br><span class="line"><span class="comment">            fos.write(len);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用数组缓冲读取多个字节,写入多个字节</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>; <span class="comment">// 每次读取的有效字节个数</span></span><br><span class="line">        <span class="keyword">while</span>((len = fis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            fos.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放资源(先关写的,后关闭读的;如果写完了,肯定读取完毕了)</span></span><br><span class="line">        fos.close();</span><br><span class="line">        fis.close();</span><br><span class="line">        <span class="keyword">long</span> e = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"复制文件共耗时:"</span>+(e-s)+<span class="string">"毫秒"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="字节流读取中文的问题"><a href="#字节流读取中文的问题" class="headerlink" title="字节流读取中文的问题"></a>字节流读取中文的问题</h2><p>1 个中文字符：</p>
<ul>
<li>GBK： 占用 2 个字节；</li>
<li>UTF-8：占用 3 个字节。</li>
</ul>
<p>使用字节流读取中文文件的时候，一个中文字符占多个字节，执行下面的代码会导致中文乱码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01InputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"c.txt"</span>); <span class="comment">// 你好abc</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println((<span class="keyword">char</span>)len); <span class="comment">// 转换了一个字符的1/n部分</span></span><br><span class="line">        &#125;</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h1><p>当使用字节流读取文本文件时，可能会有一个小问题。就是遇到中文字符时，可能不会显示完整的字符，那是因为一个中文字符可能占用多个字节存储。所以 Java 提供一些字符流类，<strong>以字符为单位读写数据，专门用于处理文本文件</strong>。</p>
<h2 id="Reader-字符输入流"><a href="#Reader-字符输入流" class="headerlink" title="Reader 字符输入流"></a><code>Reader</code> 字符输入流</h2><p> <code>java.io.Reader</code> 抽象类表示用于读取字符流的所有类的超类，是<strong>字符输入流</strong>的最顶层的父类，可以读取字符信息到内存中。它定义了字符输入流的基本共性功能方法。</p>
<ul>
<li><code>public int read()</code> ：从输入流读取一个字符。 </li>
<li><code>public int read(char[] cbuf)</code> ：从输入流中读取一些字符，并将它们存储到字符数组 cbuf 中 。</li>
<li><code>public void close()</code> ：关闭此流并释放与此流相关联的任何系统资源。    </li>
</ul>
<h2 id="FileReader-文件字符输入流"><a href="#FileReader-文件字符输入流" class="headerlink" title="FileReader 文件字符输入流"></a><code>FileReader</code> 文件字符输入流</h2><p> <code>java.io.FileReader</code> 类是文件字符输入流，是用于读取字符文件的便利类，把硬盘文件中的数据以字符的方式读取到内存中。</p>
<p><code>FileReader extends InputStreamReader extends Reader</code>。</p>
<h3 id="构造方法-3"><a href="#构造方法-3" class="headerlink" title="构造方法"></a>构造方法</h3><p>构造时使用系统默认的字符编码和默认字节缓冲区。</p>
<ul>
<li><code>FileReader(File file)</code> ：创建一个新的 <code>FileReader</code> ，给定要读取的 File 对象。   </li>
<li><code>FileReader(String fileName)</code> ：创建一个新的 <code>FileReader</code> ，给定要读取的文件的名称。  </li>
</ul>
<p>当创建一个输入流对象时，必须传入一个文件路径。类似于 <code>FileInputStream</code> 。</p>
<p>构造方法的作用：</p>
<ol>
<li>创建一个 <code>FileReader</code> 对象；</li>
<li>会把 <code>FileReader</code> 对象指向要读取的文件。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileReaderConstructor</span> <span class="title">throws</span> <span class="title">IOException</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 使用File对象创建流对象</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        FileReader fr = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"b.txt"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="读取字符数据"><a href="#读取字符数据" class="headerlink" title="读取字符数据"></a>读取字符数据</h3><p>字符输入流的使用步骤：</p>
<ol>
<li>创建 <code>FileReader</code> 对象，构造方法中绑定要读取的数据源；</li>
<li>使用 <code>FileReader</code> 对象中的方法 <code>read</code> 读取文件；</li>
<li>释放资源。</li>
</ol>
<h4 id="读取一个字符"><a href="#读取一个字符" class="headerlink" title="读取一个字符"></a>读取一个字符</h4><p> <code>int read()</code> 方法，每次可以读取一个字符的数据，提升为 int 类型返回，读取到文件末尾，返回 <code>-1</code>，循环读取。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"c.txt"</span>);</span><br><span class="line">        <span class="comment">// 使用FileReader对象中的方法read读取文件</span></span><br><span class="line">        <span class="comment">// int read() 读取单个字符并返回。</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = fr.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>)len);</span><br><span class="line">        &#125;</span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="读取字符数组"><a href="#读取字符数组" class="headerlink" title="读取字符数组"></a>读取字符数组</h4><p> <code>int read(char[] cbuf)</code> 方法，每次读取 <code>cbuf.length</code> 个字符到数组中，返回读取到的有效字符个数，读取到末尾时，返回 <code>-1</code> 。</p>
<p> <code>String</code> 类的构造方法：</p>
<ul>
<li><code>String(char[] value)</code> ：把字符数组转换为字符串。</li>
<li><code>String(char[] value, int offset, int count)</code> ：把字符数组的一部分转换为字符串。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"c.txt"</span>);</span><br><span class="line">        <span class="comment">// int read(char[] cbuf)一次读取多个字符,将字符读入数组。</span></span><br><span class="line">        <span class="keyword">char</span>[] cs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>]; <span class="comment">// 存储读取到的多个字符</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>; <span class="comment">// 记录的是每次读取的有效字符个数</span></span><br><span class="line">        <span class="keyword">while</span>((len = fr.read(cs)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(cs, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Writer-字符输出流"><a href="#Writer-字符输出流" class="headerlink" title="Writer 字符输出流"></a><code>Writer</code> 字符输出流</h2><p> <strong><code>java.io.Writer</code> 抽象类</strong>是表示用于写入字符流的所有类的超类，将指定的字符信息写入到目的地。它定义了字节输出流的基本共性功能方法。</p>
<ul>
<li><code>void write(int c)</code> ：写入单个字符。</li>
<li><code>void write(char[] cbuf)</code> ：写入字符数组。 </li>
<li><code>void write(char[] cbuf, int off, int len)</code> ：写入字符数组的某一部分。<ul>
<li><code>off</code> ：数组的开始索引。</li>
<li><code>len</code> ：写的字符个数。 </li>
</ul>
</li>
<li><code>void write(String str)</code> ：写入字符串。 </li>
<li><code>void write(String str, int off, int len)</code> ：写入字符串的某一部分。<ul>
<li><code>off</code> ：字符串的开始索引。</li>
<li><code>len</code> ：写的字符个数。</li>
</ul>
</li>
<li><code>void flush()</code> ：刷新该流的缓冲。</li>
<li><code>void close()</code> ：关闭此流，但要先刷新它。 </li>
</ul>
<h2 id="FileWriter-文件字符输出流"><a href="#FileWriter-文件字符输出流" class="headerlink" title="FileWriter 文件字符输出流"></a><code>FileWriter</code> 文件字符输出流</h2><p> <code>java.io.FileWriter</code> 类是文件字符输出流，是写入字符到文件的便利类，用于把内存中字符数据写入到文件中。</p>
<p> <code>FileWriter extends OutputStreamWriter extends Writer</code>。</p>
<h3 id="构造方法-4"><a href="#构造方法-4" class="headerlink" title="构造方法"></a>构造方法</h3><p>构造时使用系统默认的字符编码和默认字节缓冲区。</p>
<ul>
<li><code>FileWriter(File file)</code> ： 创建一个新的 <code>FileWriter</code>，给定要读取的 File 对象。</li>
<li><code>FileWriter(String fileName)</code> ： 创建一个新的 <code>FileWriter</code>，给定要读取的文件的名称。</li>
</ul>
<p>当创建一个流对象时，必须传入一个文件路径，类似于 <code>FileOutputStream</code>。</p>
<p>构造方法的作用：</p>
<ol>
<li>会创建一个 <code>FileWriter</code> 对象；</li>
<li>会根据构造方法中传递的文件 / 文件的路径，创建文件；</li>
<li>会把 <code>FileWriter</code> 对象指向创建好的文件。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileWriterConstructor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用File对象创建流对象</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(file);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"b.txt"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="写入字符数据"><a href="#写入字符数据" class="headerlink" title="写入字符数据"></a>写入字符数据</h3><p>字符输出流的使用步骤：</p>
<ol>
<li>创建 <code>FileWriter</code> 对象，构造方法中绑定要写入数据的目的地；</li>
<li>使用 <code>FileWriter</code> 中的方法 <code>write</code> ，<strong>把数据写入到内存缓冲区中（字符转换为字节的过程）</strong>；</li>
<li>使用 <code>FileWriter</code> 中的方法 <code>flush</code> ，<strong>把内存缓冲区中的数据，刷新到文件中</strong>；</li>
<li>释放资源（会先把内存缓冲区中的数据刷新到文件中）。</li>
</ol>
<h4 id="写入一个字符"><a href="#写入一个字符" class="headerlink" title="写入一个字符"></a>写入一个字符</h4><p> <code>write(int b)</code> 方法，每次可以写入一个字符数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoWriter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建FileWriter对象,构造方法中绑定要写入数据的目的地</span></span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"d.txt"</span>);</span><br><span class="line">        <span class="comment">// 使用FileWriter中的方法write,把数据写入到内存缓冲区中(字符转换为字节的过程)</span></span><br><span class="line">        <span class="comment">// void write(int c) 写入单个字符。</span></span><br><span class="line">        fw.write(<span class="number">97</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用FileWriter中的方法flush,把内存缓冲区中的数据,刷新到文件中</span></span><br><span class="line">        <span class="comment">// fw.flush();</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 释放资源(会先把内存缓冲区中的数据刷新到文件中)</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            【注意】关闭资源时,与FileOutputStream不同。</span></span><br><span class="line"><span class="comment">             如果不关闭,数据只是保存到缓冲区，并未保存到文件。</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="flush-与-close-的区别"><a href="#flush-与-close-的区别" class="headerlink" title="flush 与 close 的区别"></a><code>flush</code> 与 <code>close</code> 的区别</h4><p> <code>flush</code> 方法和 <code>close</code> 方法的区别：</p>
<ul>
<li><code>flush</code> ：刷新缓冲区，流对象可以继续使用。</li>
<li><code>close</code> ：先刷新缓冲区，然后通知系统释放资源。流对象不可以再被使用了。</li>
</ul>
<p>即便是 <code>flush</code> 方法写入了数据，操作的最后还是要调用 <code>close</code> 方法，释放系统资源。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoCloseAndFlush</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"e.txt"</span>);</span><br><span class="line">        fw.write(<span class="number">97</span>);</span><br><span class="line">        <span class="comment">// 使用FileWriter中的方法flush,把内存缓冲区中的数据,刷新到文件中</span></span><br><span class="line">        fw.flush();</span><br><span class="line">        <span class="comment">// 刷新之后流可以继续使用</span></span><br><span class="line">        fw.write(<span class="number">98</span>);</span><br><span class="line">        <span class="comment">// 释放资源(会先把内存缓冲区中的数据刷新到文件中)</span></span><br><span class="line">        fw.close();</span><br><span class="line">        <span class="comment">// close方法之后流已经关闭了,已经从内存中消失了,流就不能再使用了</span></span><br><span class="line">        <span class="comment">// fw.write(99); // IOException: Stream closed</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="写入多个字符"><a href="#写入多个字符" class="headerlink" title="写入多个字符"></a>写入多个字符</h4><p> <code>write(char[] cbuf)</code> 和 <code>write(char[] cbuf, int off, int len)</code> 方法，每次可以写入字符数组中的数据，用法类似 <code>FileOutputStream</code>。</p>
<p> <code>write(String str)</code> 和 <code>write(String str, int off, int len)</code> 方法，每次可以写入字符串中的数据，更为方便。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoWriter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"f.txt"</span>);</span><br><span class="line">        <span class="keyword">char</span>[] cs = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>&#125;;</span><br><span class="line">        <span class="comment">// void write(char[] cbuf)写入字符数组</span></span><br><span class="line">        fw.write(cs); <span class="comment">// abcde</span></span><br><span class="line">        <span class="comment">// void write(char[] cbuf, int off, int len)写入字符数组的某一部分</span></span><br><span class="line">        fw.write(cs, <span class="number">1</span>, <span class="number">3</span>); <span class="comment">// bcd</span></span><br><span class="line">        <span class="comment">// void write(String str)写入字符串</span></span><br><span class="line">        fw.write(<span class="string">"传智播客"</span>); <span class="comment">// 传智播客</span></span><br><span class="line">        <span class="comment">// void write(String str, int off, int len) 写入字符串的某一部分</span></span><br><span class="line">        fw.write(<span class="string">"黑马程序员"</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 程序员</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="续写和换行"><a href="#续写和换行" class="headerlink" title="续写和换行"></a>续写和换行</h3><p>续写：使用两个参数的构造方法。</p>
<ul>
<li><code>FileWriter(String fileName, boolean append)</code></li>
<li><code>FileWriter(File file, boolean append)</code><ul>
<li><code>String fileName</code> 与 <code>File file</code> ：写入数据的目的地。</li>
<li><code>boolean append</code> ：续写开关。<ul>
<li><code>true</code> ：不会创建新的文件覆盖源文件，可以续写；</li>
<li><code>false</code> ：创建新的文件覆盖源文件。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>换行：换行符号</p>
<ul>
<li>Windows：<code>\r\n</code> </li>
<li>Linux：<code>/n</code> </li>
<li>Mac：<code>/r</code> </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoWriter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"g.txt"</span>, <span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            fw.write(<span class="string">"HelloWorld"</span> + i + <span class="string">"\r\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="字符流的注意事项"><a href="#字符流的注意事项" class="headerlink" title="字符流的注意事项"></a>字符流的注意事项</h2><ul>
<li><strong>字符流，只能操作文本文件</strong>，不能操作图片，视频等非文本文件。</li>
<li>当我们单纯读或者写文本文件时使用字符流，其他情况使用字节流。</li>
</ul>
<h1 id="IO-异常的处理"><a href="#IO-异常的处理" class="headerlink" title="IO 异常的处理"></a>IO 异常的处理</h1><h2 id="JDK-7-之前的处理"><a href="#JDK-7-之前的处理" class="headerlink" title="JDK 7 之前的处理"></a>JDK 7 之前的处理</h2><p>在 JDK 7 之前使用 <code>try...catch...finally</code> 代码块处理流中的异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 可能会产出异常的代码</span></span><br><span class="line">&#125; <span class="keyword">catch</span>(异常类变量 变量名) &#123;</span><br><span class="line">    <span class="comment">// 异常的处理逻辑</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// 一定会执行的代码</span></span><br><span class="line">    <span class="comment">// 资源释放</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>续写和换行案例中的异常处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoTryCatch</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 提高变量fw的作用域,让finally可以使用</span></span><br><span class="line">        <span class="comment">// 变量在定义的时候,可以没有值,但是使用的时候必须有值</span></span><br><span class="line">        <span class="comment">// 如果fw = new FileWriter();执行失败,fw没有值,fw.close会报错</span></span><br><span class="line">        FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 可能会产出异常的代码</span></span><br><span class="line">            fw = <span class="keyword">new</span> FileWriter(<span class="string">"h:\\g.txt"</span>, <span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                fw.write(<span class="string">"HelloWorld"</span> + i + <span class="string">"\r\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">            <span class="comment">// 异常的处理逻辑</span></span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 一定会执行的代码</span></span><br><span class="line">            <span class="comment">// 创建对象失败了,fw的默认值就是null,null是不能调用方法的,会抛出NullPointerException,需要增加一个判断,不是null在把资源释放</span></span><br><span class="line">            <span class="keyword">if</span>(fw != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// fw.close方法声明抛出了IOException异常对象,所以我们就的处理这个异常对象,要么throws,要么try catch</span></span><br><span class="line">                    fw.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="JDK-7-的处理"><a href="#JDK-7-的处理" class="headerlink" title="JDK 7 的处理"></a>JDK 7 的处理</h2><p>还可以使用 JDK 7 优化后的 <code>try-with-resource</code> 语句，该语句确保了每个资源在语句结束时关闭。所谓的资源（resource）是指在程序完成后，必须关闭的对象。</p>
<p>在 <code>try</code> 的后边可以增加一个 <code>()</code>，在括号中可以定义流对象，那么这个流对象的作用域就在 <code>try</code> 中有效，<code>try</code> 中的代码执行完毕，会自动把流对象释放，不用写 <code>finally</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (创建流对象语句，如果多个,使用<span class="string">';'</span>隔开) &#123;</span><br><span class="line">    <span class="comment">// 读写数据</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    <span class="comment">// 异常的处理逻辑</span></span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>文件复制案例中的异常处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoJDK7</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="comment">// 创建一个字节输入流对象,构造方法中绑定要读取的数据源</span></span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"c:\\1.jpg"</span>);</span><br><span class="line">            <span class="comment">// 创建一个字节输出流对象,构造方法中绑定要写入的目的地</span></span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"d:\\1.jpg"</span>);) &#123;</span><br><span class="line">            <span class="comment">// 可能会产出异常的代码</span></span><br><span class="line">            <span class="comment">// 使用字节输入流对象中的方法read读取文件</span></span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// 使用字节输出流中的方法write,把读取到的字节写入到目的地的文件中</span></span><br><span class="line">                fos.write(len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// 异常的处理逻辑</span></span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="JDK-9-的处理"><a href="#JDK-9-的处理" class="headerlink" title="JDK 9 的处理"></a>JDK 9 的处理</h2><p>JDK 9 中 <code>try-with-resource</code> 的改进，对于<strong>引入对象</strong>的方式，支持的更加简洁。被引入的对象，同样可以自动关闭，无需手动 close。</p>
<p> <code>try</code> 的前边可以定义流对象，在 <code>try</code> 后边的 <code>()</code> 中可以直接引入流对象的名称（变量名），在 <code>try</code> 代码执行完毕之后，流对象也可以自动释放掉，不用写 <code>finally</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 被final修饰的对象</span></span><br><span class="line"><span class="keyword">final</span> Resource resource1 = <span class="keyword">new</span> Resource(<span class="string">"resource1"</span>);</span><br><span class="line"><span class="comment">// 普通对象</span></span><br><span class="line">Resource resource2 = <span class="keyword">new</span> Resource(<span class="string">"resource2"</span>);</span><br><span class="line"><span class="comment">// 引入资源对象</span></span><br><span class="line"><span class="keyword">try</span> (resource1; resource2) &#123;</span><br><span class="line">    <span class="comment">// 使用对象</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (异常类型 异常变量名) &#123;</span><br><span class="line">    <span class="comment">// 异常处理逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>文件复制案例中的异常处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoJDK9</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"c:\\1.jpg"</span>);</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"d:\\1.jpg"</span>);</span><br><span class="line">        <span class="keyword">try</span>(fis; fos) &#123;</span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                fos.write(len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// fos.write(1); // Stream Closed</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Properties-属性集"><a href="#Properties-属性集" class="headerlink" title="Properties 属性集"></a><code>Properties</code> 属性集</h1><p> <code>java.util.Properties</code> 继承于 <code>Hashtable</code> ，来表示一个<strong>持久的属性集</strong>。它使用<strong>键值结构</strong>存储数据，<strong>每个键及其对应值都是一个字符串</strong>。该类也被许多 Java 类使用，比如获取系统属性时，<code>System.getProperties()</code> 方法就是返回一个 <code>Properties</code> 对象。</p>
<h2 id="Properties-类"><a href="#Properties-类" class="headerlink" title="Properties 类"></a><code>Properties</code> 类</h2><p> <code>java.util.Properties extends Hashtable&lt;k,v&gt; implements Map&lt;k,v&gt;</code>。</p>
<p> <code>Properties</code> 类表示了一个持久的属性集。<code>Properties</code> 可保存在流中或从流中加载。</p>
<p> <code>Properties</code> 集合是一个唯一<strong>和 IO 流相结合</strong>的集合。</p>
<ul>
<li>可以使用 <code>Properties</code> 集合中的方法 <code>store</code> ，把集合中的临时数据，持久化写入到硬盘中存储。</li>
<li>可以使用 <code>Properties</code> 集合中的方法 <code>load</code> ，把硬盘中保存的文件（键值对），读取到集合中使用。</li>
</ul>
<p>属性列表中每个键及其对应值都是一个字符串。</p>
<ul>
<li><code>Properties</code> 集合是一个双列集合，key 和 value 默认都是字符串。</li>
</ul>
<h3 id="构造方法-5"><a href="#构造方法-5" class="headerlink" title="构造方法"></a>构造方法</h3><ul>
<li><code>public Properties()</code> ：创建一个空的属性列表。</li>
</ul>
<h3 id="字符串操作方法"><a href="#字符串操作方法" class="headerlink" title="字符串操作方法"></a>字符串操作方法</h3><p> <code>Properties</code> 集合有一些操作字符串的特有方法：</p>
<ul>
<li><code>public Object setProperty(String key, String value)</code> ：保存一对属性。调用 <code>Hashtable</code> 的方法 <code>put</code>。</li>
<li><code>public String getProperty(String key)</code> ：使用此属性列表中指定的键搜索属性值。此方法相当于 <code>Map</code> 集合中的 <code>get(key)</code> 方法。</li>
<li><code>public Set&lt;String&gt; stringPropertyNames()</code> ：返回此属性列表中的键集。此方法相当于 <code>Map</code> 集合中的 <code>keySet</code> 方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoProperties</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建Properties集合对象</span></span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">// 使用setProperty往集合中添加数据</span></span><br><span class="line">        prop.setProperty(<span class="string">"赵丽颖"</span>,<span class="string">"168"</span>);</span><br><span class="line">        prop.setProperty(<span class="string">"迪丽热巴"</span>,<span class="string">"165"</span>);</span><br><span class="line">        prop.setProperty(<span class="string">"古力娜扎"</span>,<span class="string">"160"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用stringPropertyNames把Properties集合中的键取出,存储到一个Set集合中</span></span><br><span class="line">        Set&lt;String&gt; set = prop.stringPropertyNames();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历Set集合,取出Properties集合的每一个键</span></span><br><span class="line">        <span class="keyword">for</span> (String key : set) &#123;</span><br><span class="line">            <span class="comment">// 使用getProperty方法通过key获取value</span></span><br><span class="line">            String value = prop.getProperty(key);</span><br><span class="line">            System.out.println(key + <span class="string">"="</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="与输出流相关的方法"><a href="#与输出流相关的方法" class="headerlink" title="与输出流相关的方法"></a>与输出流相关的方法</h3><p>可以使用 <code>Properties</code> 集合中的方法 <code>store</code>，把集合中的临时数据，持久化写入到硬盘中存储。</p>
<ul>
<li><code>void store(OutputStream out, String comments)</code> </li>
<li><code>void store(Writer writer, String comments)</code> <ul>
<li><code>OutputStream out</code> ：字节输出流，不能写入中文。</li>
<li><code>Writer writer</code> ：字符输出流，可以写中文。</li>
<li><code>String comments</code> ：注释，用来解释说明保存的文件是做什么用的。不能使用中文，会产生乱码，默认是 Unicode 编码，一般使用 <code>&quot;&quot;</code> 空字符串。</li>
</ul>
</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建 <code>Properties</code> 集合对象，添加数据；</li>
<li>创建字节输出流 / 字符输出流对象，构造方法中绑定要输出的目的地；</li>
<li>使用 <code>Properties</code> 集合中的方法 <code>store</code>，把集合中的临时数据，持久化写入到硬盘中存储；</li>
<li>释放资源。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoProperties</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建Properties集合对象,添加数据</span></span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">        prop.setProperty(<span class="string">"赵丽颖"</span>,<span class="string">"168"</span>);</span><br><span class="line">        prop.setProperty(<span class="string">"迪丽热巴"</span>,<span class="string">"165"</span>);</span><br><span class="line">        prop.setProperty(<span class="string">"古力娜扎"</span>,<span class="string">"160"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建字节输出流/字符输出流对象,构造方法中绑定要输出的目的地</span></span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"prop.txt"</span>);</span><br><span class="line">        <span class="comment">// 使用Properties集合中的方法store,把集合中的临时数据,持久化写入到硬盘中存储</span></span><br><span class="line">        prop.store(fw, <span class="string">"save data"</span>);</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        fw.close();</span><br><span class="line"></span><br><span class="line">        prop.store(<span class="keyword">new</span> FileOutputStream(<span class="string">"prop2.txt"</span>), <span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="与输入流相关的方法"><a href="#与输入流相关的方法" class="headerlink" title="与输入流相关的方法"></a>与输入流相关的方法</h3><p>可以使用 <code>Properties</code> 集合中的方法 <code>load</code>，把硬盘中保存的文件（键值对）读取到集合中使用。</p>
<ul>
<li><code>void load(InputStream inStream)</code> </li>
<li><code>void load(Reader reader)</code> <ul>
<li><code>InputStream inStream</code> ：字节输入流，不能读取含有中文的键值对。</li>
<li><code>Reader reader</code> ：字符输入流，能读取含有中文的键值对。</li>
</ul>
</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建 <code>Properties</code> 集合对象；</li>
<li>使用 <code>Properties</code> 集合对象中的方法 <code>load</code> 读取保存键值对的文件；</li>
<li>遍历 <code>Properties</code> 集合。</li>
</ol>
<p>注意：</p>
<ol>
<li>存储键值对的文件中，键与值默认的连接符号可以使用 <code>=</code>、<code>:</code>、空格或其他符号；</li>
<li>存储键值对的文件中，可以使用 <code>#</code> 进行注释，被注释的键值对不会再被读取；</li>
<li>存储键值对的文件中，键与值默认都是字符串，不用再加引号。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoProperties</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">// prop.load(new FileInputStream("prop.txt"));</span></span><br><span class="line">        prop.load(<span class="keyword">new</span> FileReader(<span class="string">"prop.txt"</span>));</span><br><span class="line">        <span class="comment">// 遍历Properties集合</span></span><br><span class="line">        Set&lt;String&gt; set = prop.stringPropertyNames();</span><br><span class="line">        <span class="keyword">for</span> (String key : set) &#123;</span><br><span class="line">            String value = prop.getProperty(key);</span><br><span class="line">            System.out.println(key + <span class="string">"="</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h1><p>有一些功能更为强大的流，比如能够高效读写的缓冲流，能够转换编码的转换流，能够持久化存储对象的序列化流等等，都是在基本的流对象基础之上创建而来的，相当于是对基本流对象的一种增强。</p>
<h2 id="缓冲流概述"><a href="#缓冲流概述" class="headerlink" title="缓冲流概述"></a>缓冲流概述</h2><p>缓冲流，也叫高效流，是对4个基本的 <code>FileXxx</code> 流的增强，所以也是 4 个流，按照数据类型分类：</p>
<ul>
<li><strong>字节缓冲流</strong>：<code>BufferedInputStream</code>，<code>BufferedOutputStream</code> </li>
<li><strong>字符缓冲流</strong>：<code>BufferedReader</code>，<code>BufferedWriter</code> </li>
</ul>
<p>缓冲流的基本原理，是在创建流对象时，会创建一个内置的默认大小的缓冲区数组，通过缓冲区读写，减少系统 IO 次数，从而提高读写的效率。</p>
<p><img src="/2020/02/20/java-advanced-4/缓冲流的原理.png" alt></p>
<h2 id="BufferedOutputStream-字节缓冲输出流"><a href="#BufferedOutputStream-字节缓冲输出流" class="headerlink" title="BufferedOutputStream 字节缓冲输出流"></a><code>BufferedOutputStream</code> 字节缓冲输出流</h2><p> <code>java.io.BufferedOutputStream</code> 类是 <code>OutputStream</code> 类的子类，是字节缓冲输出流。</p>
<p>继承自父类的共性成员方法：</p>
<ul>
<li><code>public void close()</code> ：关闭此输出流并释放与此流相关联的任何系统资源。</li>
<li><code>public void flush()</code> ：刷新此输出流并强制任何缓冲的输出字节被写出。</li>
<li><code>public void write(byte[] b)</code> ：将 b.length 字节从指定的字节数组写入此输出流。</li>
<li><code>public void write(byte[] b, int off, int len)</code> ：从指定的字节数组写入 len 字节，从偏移量 off 开始输出到此输出流。</li>
<li><code>public void write(int b)</code> ：将指定的字节输出流。</li>
</ul>
<p>构造方法：</p>
<ul>
<li><code>BufferedOutputStream(OutputStream out)</code> ：创建一个新的缓冲输出流，以将数据写入指定的底层输出流。</li>
<li><code>BufferedOutputStream(OutputStream out, int size)</code> ：创建一个新的缓冲输出流，以将具有指定缓冲区大小的数据写入指定的底层输出流。<ul>
<li><code>OutputStream out</code> ：字节输出流，可以传递 <code>FileOutputStream</code>，缓冲流会给 <code>FileOutputStream</code> 增加一个缓冲区，提高 <code>FileOutputStream</code> 的写入效率。</li>
<li><code>int size</code> ：指定缓冲流内部缓冲区的大小，不指定则使用默认大小。</li>
</ul>
</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建 <code>FileOutputStream</code> 对象，构造方法中绑定要输出的目的地；</li>
<li>创建 <code>BufferedOutputStream</code> 对象，构造方法中传递 <code>FileOutputStream</code> 对象，提高 <code>FileOutputStream</code> 对象效率；</li>
<li>使用 <code>BufferedOutputStream</code> 对象中的方法 <code>write</code>，把数据写入到内部缓冲区中；</li>
<li>使用 <code>BufferedOutputStream</code> 对象中的方法 <code>flush</code>，把内部缓冲区中的数据，刷新到文件中；</li>
<li>释放资源（会先调用 <code>flush</code> 方法刷新数据，第4部可以省略）。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoBufferedOutputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"a.txt"</span>);</span><br><span class="line">        BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(fos);</span><br><span class="line">        bos.write(<span class="string">"我把数据写入到内部缓冲区中"</span>.getBytes());</span><br><span class="line">        <span class="comment">// bos.flush(); // 可省略</span></span><br><span class="line">        bos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="BufferedInputStream-字节缓冲输入流"><a href="#BufferedInputStream-字节缓冲输入流" class="headerlink" title="BufferedInputStream 字节缓冲输入流"></a><code>BufferedInputStream</code> 字节缓冲输入流</h2><p> <code>java.io.BufferedInputStream</code> 类继承 <code>InputStream</code> 类，是字节缓冲输入流。</p>
<p>继承自父类的共性成员方法：</p>
<ul>
<li><code>int read()</code> ：从输入流中读取数据的下一个字节。</li>
<li><code>int read(byte[] b)</code> ：从输入流中读取一定数量的字节，并将其存储在缓冲区数组 b 中。</li>
<li><code>void close()</code> ：关闭此输入流并释放与该流关联的所有系统资源。</li>
</ul>
<p>构造方法：</p>
<ul>
<li><code>BufferedInputStream(InputStream in)</code> ：创建一个 <code>BufferedInputStream</code> 并保存其参数，即输入流 <code>in</code>，以便将来使用。</li>
<li><code>BufferedInputStream(InputStream in, int size)</code> ：创建具有指定缓冲区大小的 <code>BufferedInputStream</code> 并保存其参数，即输入流 <code>in</code>，以便将来使用。<ul>
<li><code>InputStream in</code> ：字节输入流，可以传递 <code>FileInputStream</code>，缓冲流会给 <code>FileInputStream</code> 增加一个缓冲区，提高 <code>FileInputStream</code> 的读取效率。</li>
<li><code>int size</code> ：指定缓冲流内部缓冲区的大小，不指定则使用默认大小。</li>
</ul>
</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建 <code>FileInputStream</code> 对象，构造方法中绑定要读取的数据源；</li>
<li>创建 <code>BufferedInputStream</code> 对象，构造方法中传递 <code>FileInputStream</code> 对象，提高 <code>FileInputStream</code> 对象的读取效率；</li>
<li>使用 <code>BufferedInputStream</code> 对象中的方法 <code>read</code>，读取文件；</li>
<li>释放资源。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoBufferedInputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"a.txt"</span>);</span><br><span class="line">        BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(fis);</span><br><span class="line">        <span class="comment">// 使用BufferedInputStream对象中的方法read,读取文件</span></span><br><span class="line">        <span class="comment">/*int len = 0; // 记录每次读取到的字节</span></span><br><span class="line"><span class="comment">        while((len = bis.read()) != -1) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println(len);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; <span class="comment">// 存储每次读取的数据</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>; <span class="comment">// 记录每次读取的有效字节个数</span></span><br><span class="line">        <span class="keyword">while</span>((len = bis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(bytes, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        bis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="BufferedWriter-字符缓冲输出流"><a href="#BufferedWriter-字符缓冲输出流" class="headerlink" title="BufferedWriter 字符缓冲输出流"></a><code>BufferedWriter</code> 字符缓冲输出流</h2><p> <code>java.io.BufferedWriter</code> 类继承 <code>Writer</code> 类，是字符缓冲输出流。</p>
<p>继承自父类的共性成员方法有：</p>
<ul>
<li><code>void write(int c)</code> ：写入单个字符。</li>
<li><code>void write(char[] cbuf)</code> ：写入字符数组。 </li>
<li><code>void write(char[] cbuf, int off, int len)</code> ：写入字符数组的某一部分。<ul>
<li><code>off</code> ：数组的开始索引。</li>
<li><code>len</code> ：写的字符个数。 </li>
</ul>
</li>
<li><code>void write(String str)</code> ：写入字符串。 </li>
<li><code>void write(String str, int off, int len)</code> ： 写入字符串的某一部分。<ul>
<li><code>off</code> ：字符串的开始索引。</li>
<li><code>len</code> ：写的字符个数。</li>
</ul>
</li>
<li><code>void flush()</code> ：刷新该流的缓冲。</li>
<li><code>void close()</code> ：关闭此流，但要先刷新它。 </li>
</ul>
<p>构造方法：</p>
<ul>
<li><code>BufferedWriter(Writer out)</code> ：创建一个使用默认大小输出缓冲区的缓冲字符输出流。</li>
<li><code>BufferedWriter(Writer out, int sz)</code> ：创建一个使用给定大小输出缓冲区的新缓冲字符输出流。<ul>
<li><code>Writer out</code> ：字符输出流，可以传递 <code>FileWriter</code>，缓冲流会给 <code>FileWriter</code> 增加一个缓冲区，提高 <code>FileWriter</code> 的写入效率。</li>
<li><code>int sz</code> ：指定缓冲区的大小，不写则使用默认大小。</li>
</ul>
</li>
</ul>
<p>特有的成员方法：</p>
<ul>
<li><code>void newLine()</code> ：写入一个行分隔符。会根据不同的操作系统，获取不同的行分隔符<ul>
<li>Windows：<code>\r\n</code> </li>
<li>Linux：<code>/n</code> </li>
<li>Mac：<code>/r</code> </li>
</ul>
</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建字符缓冲输出流对象，构造方法中传递字符输出流；</li>
<li>调用字符缓冲输出流中的方法 <code>write</code>，把数据写入到内存缓冲区中；</li>
<li>调用字符缓冲输出流中的方法 <code>flush</code>，把内存缓冲区中的数据，刷新到文件中；</li>
<li>释放资源。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoBufferedWriter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"c.txt"</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            bw.write(<span class="string">"传智播客"</span>);</span><br><span class="line">            <span class="comment">// bw.write("\r\n");</span></span><br><span class="line">            bw.newLine();</span><br><span class="line">        &#125;</span><br><span class="line">        bw.flush();</span><br><span class="line">        bw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="BufferedReader-字符缓冲输入流"><a href="#BufferedReader-字符缓冲输入流" class="headerlink" title="BufferedReader 字符缓冲输入流"></a><code>BufferedReader</code> 字符缓冲输入流</h2><p> <code>java.io.BufferedReader</code> 类继承 <code>Reader</code> 类，是字符缓冲输入流。</p>
<p>继承自父类的共性成员方法：</p>
<ul>
<li><code>int read()</code> ：读取单个字符并返回。</li>
<li><code>int read(char[] cbuf)</code> ：一次读取多个字符，将字符读入数组。</li>
<li><code>void close()</code> ：关闭该流并释放与之关联的所有资源。</li>
</ul>
<p>构造方法：</p>
<ul>
<li><code>BufferedReader(Reader in)</code> ：创建一个使用默认大小输入缓冲区的缓冲字符输入流。</li>
<li><code>BufferedReader(Reader in, int sz)</code> ：创建一个使用指定大小输入缓冲区的缓冲字符输入流。<ul>
<li><code>Reader in</code> ：字符输入流，可以传递 <code>FileReader</code>，缓冲流会给 <code>FileReader</code> 增加一个缓冲区，提高 <code>FileReader</code> 的读取效率。</li>
<li><code>int sz</code> ：指定缓冲区的大小，不写则使用默认大小。</li>
</ul>
</li>
</ul>
<p>特有的成员方法：</p>
<ul>
<li><code>String readLine()</code> ：<strong>读取一个文本行</strong>，读取一行数据。<ul>
<li>行的终止符号：通过下列字符之一即可认为某行已终止：换行 (<code>&#39;\n&#39;</code>)、回车 (<code>&#39;\r&#39;</code>) 或回车后直接跟着换行(<code>\r\n</code>)。</li>
<li>返回值：包含该行内容的字符串，<strong>不包含任何行终止符</strong>，如果已到达流末尾，则返回 <code>null</code>。</li>
</ul>
</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建字符缓冲输入流对象，构造方法中传递字符输入流；</li>
<li>使用字符缓冲输入流对象中的方法 <code>read</code> / <code>readLine</code> 读取文本；</li>
<li>释放资源。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoBufferedReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"10_IO\\c.txt"</span>));</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            发现读取是一个重复的过程,可以使用循环优化</span></span><br><span class="line"><span class="comment">            不知道文件中有多少行数据,所以使用while循环</span></span><br><span class="line"><span class="comment">            while的结束条件,读取到null结束</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String line = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="案例：文本排序"><a href="#案例：文本排序" class="headerlink" title="案例：文本排序"></a>案例：文本排序</h2><p>请将文本信息恢复顺序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">3.侍中、侍郎郭攸之、费祎、董允等，此皆良实，志虑忠纯，是以先帝简拔以遗陛下。愚以为宫中之事，事无大小，悉以咨之，然后施行，必得裨补阙漏，有所广益。</span><br><span class="line">8.愿陛下托臣以讨贼兴复之效，不效，则治臣之罪，以告先帝之灵。若无兴德之言，则责攸之、祎、允等之慢，以彰其咎；陛下亦宜自谋，以咨诹善道，察纳雅言，深追先帝遗诏，臣不胜受恩感激。</span><br><span class="line">4.将军向宠，性行淑均，晓畅军事，试用之于昔日，先帝称之曰能，是以众议举宠为督。愚以为营中之事，悉以咨之，必能使行阵和睦，优劣得所。</span><br><span class="line">2.宫中府中，俱为一体，陟罚臧否，不宜异同。若有作奸犯科及为忠善者，宜付有司论其刑赏，以昭陛下平明之理，不宜偏私，使内外异法也。</span><br><span class="line">1.先帝创业未半而中道崩殂，今天下三分，益州疲弊，此诚危急存亡之秋也。然侍卫之臣不懈于内，忠志之士忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气，不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">9.今当远离，临表涕零，不知所言。</span><br><span class="line">6.臣本布衣，躬耕于南阳，苟全性命于乱世，不求闻达于诸侯。先帝不以臣卑鄙，猥自枉屈，三顾臣于草庐之中，咨臣以当世之事，由是感激，遂许先帝以驱驰。后值倾覆，受任于败军之际，奉命于危难之间，尔来二十有一年矣。</span><br><span class="line">7.先帝知臣谨慎，故临崩寄臣以大事也。受命以来，夙夜忧叹，恐付托不效，以伤先帝之明，故五月渡泸，深入不毛。今南方已定，兵甲已足，当奖率三军，北定中原，庶竭驽钝，攘除奸凶，兴复汉室，还于旧都。此臣所以报先帝而忠陛下之职分也。至于斟酌损益，进尽忠言，则攸之、祎、允之任也。</span><br><span class="line">5.亲贤臣，远小人，此先汉所以兴隆也；亲小人，远贤臣，此后汉所以倾颓也。先帝在时，每与臣论此事，未尝不叹息痛恨于桓、灵也。侍中、尚书、长史、参军，此悉贞良死节之臣，愿陛下亲之信之，则汉室之隆，可计日而待也。</span><br></pre></td></tr></table></figure>
<p>案例实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建map集合,保存文本数据,键为序号,值为文字</span></span><br><span class="line">        HashMap&lt;String, String&gt; lineMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建流对象</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"in.txt"</span>));</span><br><span class="line">        BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"out.txt"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取数据</span></span><br><span class="line">        String line  = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 解析文本</span></span><br><span class="line">            String[] split = line.split(<span class="string">"\\."</span>);</span><br><span class="line">            <span class="comment">// 保存到集合</span></span><br><span class="line">            lineMap.put(split[<span class="number">0</span>], split[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        br.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历map集合</span></span><br><span class="line">        <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">            <span class="comment">// 获取map中文本</span></span><br><span class="line">            String value = lineMap.get(key);</span><br><span class="line">            <span class="comment">// 写出拼接文本</span></span><br><span class="line">            bw.write(key + <span class="string">"."</span> + value);</span><br><span class="line">            <span class="comment">// 写出换行</span></span><br><span class="line">            bw.newLine();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        bw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h1><h2 id="字符编码和字符集"><a href="#字符编码和字符集" class="headerlink" title="字符编码和字符集"></a>字符编码和字符集</h2><h3 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h3><p>计算机中储存的信息都是用二进制数表示的，而我们在屏幕上看到的数字、英文、标点符号、汉字等字符是二进制数转换之后的结果。</p>
<ul>
<li>编码：<ul>
<li>按照某种规则，将字符存储到计算机中。</li>
<li>字符（能看懂的）→ 字节（看不懂的）。</li>
</ul>
</li>
<li>解码：<ul>
<li>将存储在计算机中的二进制数按照某种规则解析显示出来。</li>
<li>字节(看不懂的)—&gt;字符(能看懂的)。</li>
</ul>
</li>
</ul>
<p><strong>字符编码 <code>Character Encoding</code></strong> ：就是一套自然语言的字符与二进制数之间的对应规则。</p>
<h3 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h3><p><strong>字符集 <code>Charset</code></strong> ：也叫编码表。是一个系统支持的所有字符的集合，包括各国家文字、标点符号、图形符号、数字等。</p>
<p>计算机要准确的存储和识别各种字符集符号，需要进行字符编码，一套字符集必然至少有一套字符编码。常见字符集有ASCII字符集、GBK字符集、Unicode字符集等。<img src="/2020/02/20/java-advanced-4/charset.jpg" alt></p>
<p>可见，当指定了<strong>编码</strong>，它所对应的<strong>字符集</strong>自然就指定了，所以<strong>编码</strong>才是我们最终要关心的。</p>
<ul>
<li><strong>ASCII 字符集</strong> ：<ul>
<li>ASCII（American Standard Code for Information Interchange，美国信息交换标准代码）是基于拉丁字母的一套电脑编码系统，用于显示现代英语，主要包括控制字符（回车键、退格、换行键等）和可显示字符（英文大小写字符、阿拉伯数字和西文符号）。</li>
<li>基本的 ASCII 字符集，使用 <strong>7 位（bits）表示一个字符</strong>，共 128 字符。ASCII 的扩展字符集使用 8 位（bits）表示一个字符，共 256 字符，方便支持欧洲常用字符。</li>
</ul>
</li>
<li><strong>ISO-8859-1 字符集</strong>：<ul>
<li>拉丁码表，别名 Latin-1，用于显示欧洲使用的语言，包括荷兰、丹麦、德语、意大利语、西班牙语等。</li>
<li>ISO-8859-1 使用<strong>单字节编码</strong>，兼容 ASCII 编码。</li>
</ul>
</li>
<li><strong>GBxxx 字符集</strong>：<ul>
<li>GB 就是国标的意思，是为了显示中文而设计的一套字符集。</li>
<li><strong>GB2312</strong>：简体中文码表。一个小于 127 的字符的意义与原来相同。但两个大于 127 的字符连在一起时，就表示一个汉字，这样大约可以组合了包含 7000 多个简体汉字，此外数学符号、罗马希腊的字母、日文的假名们都编进去了，连在 ASCII 里本来就有的数字、标点、字母都统统重新编了两个字节长的编码，这就是常说的“全角”字符，而原来在 127 号以下的那些就叫“半角”字符了。</li>
<li><strong>GBK</strong>：最常用的中文码表。是在 GB2312 标准基础上的扩展规范，使用了<strong>双字节编码</strong>方案，共收录了 21003 个汉字，完全兼容 GB2312 标准，同时<strong>支持繁体汉字以及日韩汉字</strong>等。</li>
<li><strong>GB18030</strong>：最新的中文码表。收录汉字 70244 个，采用<strong>多字节编码</strong>，每个字可以由 <strong>1个、2 个或 4 个</strong>字节组成。支持中国国内少数民族的文字，同时支持繁体汉字以及日韩汉字等。</li>
</ul>
</li>
<li><strong>Unicode 字符集</strong> ：<ul>
<li>Unicode 编码系统为表达任意语言的任意字符而设计，是业界的一种标准，也称为统一码、标准万国码。</li>
<li>它最多使用 4 个字节的数字来表达每个字母、符号，或者文字。有三种编码方案，UTF-8、UTF-16 和 UTF-32。最为常用的 UTF-8 编码。</li>
<li>UTF-8 编码，可以用来表示 Unicode 标准中任何字符，它是电子邮件、网页及其他存储或传送文字的应用中，优先采用的编码。互联网工程工作小组（IETF）要求所有互联网协议都必须支持 UTF-8 编码。所以，我们开发 Web 应用，也要使用 UTF-8 编码。它<strong>使用一至四个字节</strong>为每个字符编码，编码规则：<ol>
<li>128 个 US-ASCII 字符，只需一个字节编码。</li>
<li>拉丁文等字符，需要二个字节编码。 </li>
<li>大部分常用字（含中文），使用三个字节编码。</li>
<li>其他极少使用的 Unicode 辅助字符，使用四字节编码。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="编码引出的问题"><a href="#编码引出的问题" class="headerlink" title="编码引出的问题"></a>编码引出的问题</h2><p>在 IDEA 中，使用 <code>FileReader</code> 读取项目中的文本文件。由于 IDEA 的设置，都是默认的 <code>UTF-8</code> 编码，所以没有任何问题。但是，当读取 Windows 系统中创建的文本文件时，由于 Windows 系统的默认是 GBK 编码，就会出现乱码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFileReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"我是GBK格式的文本.txt"</span>);</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = fr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>)len);</span><br><span class="line">        &#125;</span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="转换流的原理"><a href="#转换流的原理" class="headerlink" title="转换流的原理"></a>转换流的原理</h2><p><img src="/2020/02/20/java-advanced-4/转换流的原理.png" alt></p>
<h2 id="OutputStreamWriter-类"><a href="#OutputStreamWriter-类" class="headerlink" title="OutputStreamWriter 类"></a><code>OutputStreamWriter</code> 类</h2><p> <code>java.io.OutputStreamWriter</code> 类继承 <code>Writer</code> 类，是<strong>字符流通向字节流的桥梁</strong>，可使用指定的 <code>charset</code> 将要写入流中的字符编码成字节。（编码：把能看懂的变成看不懂）</p>
<p>继承自父类的共性成员方法：</p>
<ul>
<li><code>void write(int c)</code> ：写入单个字符。</li>
<li><code>void write(char[] cbuf)</code> ：写入字符数组。 </li>
<li><code>void write(char[] cbuf, int off, int len)</code> ：写入字符数组的某一部分。<ul>
<li><code>off</code> ：数组的开始索引。</li>
<li><code>len</code> ：写的字符个数。 </li>
</ul>
</li>
<li><code>void write(String str)</code> ：写入字符串。 </li>
<li><code>void write(String str, int off, int len)</code> ：写入字符串的某一部分。<ul>
<li><code>off</code> ：字符串的开始索引。</li>
<li><code>len</code> ：写的字符个数。</li>
</ul>
</li>
<li><code>void flush()</code> ：刷新该流的缓冲。</li>
<li><code>void close()</code> ：关闭此流，但要先刷新它。 </li>
</ul>
<p>构造方法：</p>
<ul>
<li><code>OutputStreamWriter(OutputStream out)</code> ：创建使用默认字符编码的 <code>OutputStreamWriter</code>。</li>
<li><code>OutputStreamWriter(OutputStream out, String charsetName)</code> ：创建使用指定字符集的 <code>OutputStreamWriter</code>。<ul>
<li><code>OutputStream out</code> ：字节输出流，可以用来写转换之后的字节到文件中。</li>
<li><code>String charsetName</code> ：指定的编码表名称，不区分大小写，可以是 utf-8 / UTF-8，gbk / GBK 等，不指定则默认使用UTF-8。</li>
</ul>
</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建 <code>OutputStreamWriter</code> 对象，构造方法中传递字节输出流和指定的编码表名称；</li>
<li>使用 <code>OutputStreamWriter</code> 对象中的方法 <code>write</code>，把字符转换为字节存储缓冲区中（编码）；</li>
<li>使用 <code>OutputStreamWriter</code> 对象中的方法 <code>flush</code>，把内存缓冲区中的字节刷新到文件中（使用字节流写字节的过程）；</li>
<li>释放资源。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoOutputStreamWriter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        write_utf_8();</span><br><span class="line">        write_gbk();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write_utf_8</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream("utf_8.txt"), "utf-8");</span></span><br><span class="line">        OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"utf_8.txt"</span>)); <span class="comment">// 不指定默认使用UTF-8</span></span><br><span class="line">        osw.write(<span class="string">"你好"</span>);</span><br><span class="line">        osw.flush();</span><br><span class="line">        osw.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write_gbk</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"gbk.txt"</span>), <span class="string">"GBK"</span>);</span><br><span class="line">        osw.write(<span class="string">"你好"</span>);</span><br><span class="line">        osw.flush();</span><br><span class="line">        osw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="InputStreamReader-类"><a href="#InputStreamReader-类" class="headerlink" title="InputStreamReader 类"></a><code>InputStreamReader</code> 类</h2><p> <code>java.io.InputStreamReader</code> 类继承 <code>Reader</code> 类，是<strong>字节流通向字符流的桥梁</strong>，它使用指定的 <code>charset</code> 读取字节并将其解码为字符。（解码：把看不懂的变成能看懂的）</p>
<p>继承自父类的共性成员方法：</p>
<ul>
<li><code>public int read()</code> ：从输入流读取一个字符。 </li>
<li><code>public int read(char[] cbuf)</code> ：从输入流中读取一些字符，并将它们存储到字符数组 cbuf 中 。</li>
<li><code>public void close()</code> ：关闭此流并释放与此流相关联的任何系统资源。    </li>
</ul>
<p>构造方法：</p>
<ul>
<li><code>InputStreamReader(InputStream in)</code> ：创建一个使用默认字符集的 <code>InputStreamReader</code>。</li>
<li><code>InputStreamReader(InputStream in, String charsetName)</code> ：创建使用指定字符集的 <code>InputStreamReader</code>。<ul>
<li><code>InputStream in</code> ：字节输入流，用来读取文件中保存的字节。</li>
<li><code>String charsetName</code> ：指定的编码表名称，不区分大小写，可以是 utf-8 / UTF-8，gbk / GBK 等，不指定则默认使用 UTF-8。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoInputStreamReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        read_utf_8();</span><br><span class="line">        read_gbk();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read_utf_8</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// InputStreamReader isr = new InputStreamReader(new FileInputStream("utf_8.txt"), "UTF-8");</span></span><br><span class="line">        InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"utf_8.txt"</span>)); <span class="comment">// 不指定默认使用UTF-8</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = isr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println((<span class="keyword">char</span>)len);</span><br><span class="line">        &#125;</span><br><span class="line">        isr.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read_gbk</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// InputStreamReader isr = new InputStreamReader(new FileInputStream("gbk.txt"), "UTF-8"); // ???</span></span><br><span class="line">        InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"gbk.txt"</span>), <span class="string">"GBK"</span>); <span class="comment">// 你好</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = isr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println((<span class="keyword">char</span>)len);</span><br><span class="line">        &#125;</span><br><span class="line">        isr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="案例：转换文件编码"><a href="#案例：转换文件编码" class="headerlink" title="案例：转换文件编码"></a>案例：转换文件编码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    练习：转换文件编码</span></span><br><span class="line"><span class="comment">        将GBK编码的文本文件，转换为UTF-8编码的文本文件。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建InputStreamReader对象,构造方法中传递字节输入流和指定的编码表名称GBK</span></span><br><span class="line">        InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"我是GBK格式的文本.txt"</span>), <span class="string">"GBK"</span>);</span><br><span class="line">        <span class="comment">// 创建OutputStreamWriter对象,构造方法中传递字节输出流和指定的编码表名称UTF-8</span></span><br><span class="line">        OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"我是utf_8格式的文件.txt"</span>), <span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">// 使用InputStreamReader对象中的方法read读取文件</span></span><br><span class="line">        <span class="keyword">char</span> cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = isr.read(cbuf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 使用OutputStreamWriter对象中的方法write,把读取的数据写入到文件中</span></span><br><span class="line">            osw.write(cbuf, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        osw.close();</span><br><span class="line">        isr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="序列化流"><a href="#序列化流" class="headerlink" title="序列化流"></a>序列化流</h1><h2 id="序列化流概述"><a href="#序列化流概述" class="headerlink" title="序列化流概述"></a>序列化流概述</h2><p>Java 提供了一种对象<strong>序列化</strong>的机制。用一个字节序列可以表示一个对象，该字节序列包含该 <code>对象的数据</code>、<code>对象的类型</code> 和 <code>对象中存储的属性</code> 等信息。字节序列写出到文件之后，相当于文件中<strong>持久保存</strong>了一个对象的信息。 </p>
<p>反之，该字节序列还可以从文件中读取回来，重构对象，对它进行<strong>反序列化</strong>。<code>对象的数据</code>、<code>对象的类型</code> 和 <code>对象中存储的数据</code> 信息，都可以用来在内存中创建对象。</p>
<p><img src="/2020/02/20/java-advanced-4/序列化和反序列化的概述.png" alt="序列化和反序列化的概述"></p>
<h2 id="ObjectOutputStream-对象的序列化流"><a href="#ObjectOutputStream-对象的序列化流" class="headerlink" title="ObjectOutputStream 对象的序列化流"></a><code>ObjectOutputStream</code> 对象的序列化流</h2><p> <code>java.io.ObjectOutputStream</code> 类继承 <code>OutputStream</code> 类，是对象的序列化流，把 Java 对象以流的方式写入到文件中，实现对象的持久存储。</p>
<p>构造方法：</p>
<ul>
<li><code>ObjectOutputStream(OutputStream out)</code> ：创建写入指定 <code>OutputStream</code> 的 <code>ObjectOutputStream</code>。<ul>
<li>参数 <code>OutputStream out</code> ：字节输出流。</li>
</ul>
</li>
</ul>
<p>特有的成员方法：</p>
<ul>
<li><code>void writeObject(Object obj)</code> ：将指定的对象写入 <code>ObjectOutputStream</code>。</li>
</ul>
<p>使用步骤：</p>
<ol>
<li>创建 <code>ObjectOutputStream</code> 对象，构造方法中传递字节输出流；</li>
<li>使用 <code>ObjectOutputStream</code> 对象中的方法 <code>writeObject</code>，把对象写入到文件中；</li>
<li>释放资源。</li>
</ol>
<h3 id="Serializable-接口"><a href="#Serializable-接口" class="headerlink" title="Serializable 接口"></a><code>Serializable</code> 接口</h3><p>类通过实现 <strong><code>java.io.Serializable</code> 接口</strong>以启用其序列化功能。</p>
<ul>
<li>要进行序列化和反序列化的类必须实现 <code>Serializable</code> 接口，未实现此接口的类将无法使其任何状态序列化或反序列化，序列化和反序列化的时候会抛出 <code>NotSerializableException</code> 异常。</li>
<li><code>Serializable</code> 接口是一个标记型接口，会给类添加一个标记，当进行序列化和反序列化的时候，就会检测类上是否有这个标记：<ul>
<li>有标记：可以序列化和反序列化；</li>
<li>没有标记：会抛出 <code>NotSerializableException</code> 。</li>
</ul>
</li>
</ul>
<h3 id="transient-关键字"><a href="#transient-关键字" class="headerlink" title="transient 关键字"></a><code>transient</code> 关键字</h3><p> <code>static</code> 关键字：静态关键字</p>
<ul>
<li>静态优先于非静态加载到内存中（静态优先于对象进入到内存中）；</li>
<li>被 <code>static</code> 修饰的成员变量属于类，不能被序列化，序列化的都是对象。</li>
</ul>
<p><code>transient</code> 关键字：瞬态关键字</p>
<ul>
<li>被 <code>transient</code> 修饰的成员变量，不能被序列化。</li>
</ul>
<h3 id="序列化操作"><a href="#序列化操作" class="headerlink" title="序列化操作"></a>序列化操作</h3><p>一个对象要想序列化，必须满足两个条件：</p>
<ul>
<li>该类必须实现<code>java.io.Serializable</code> 接口，<code>Serializable</code> 是一个标记接口，不实现此接口的类将不会使任何状态序列化或反序列化，会抛出<code>NotSerializableException</code> 。</li>
<li>该类的所有属性必须是可序列化的。如果有一个属性不需要可序列化的，则该属性必须注明是瞬态的，使用 <code>transient</code> 关键字修饰。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoObjectOutputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"person.txt"</span>));</span><br><span class="line">        oos.writeObject(<span class="keyword">new</span> Person(<span class="string">"小美女"</span>, <span class="number">18</span>));</span><br><span class="line">        oos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ObjectInputStream-对象的反序列化流"><a href="#ObjectInputStream-对象的反序列化流" class="headerlink" title="ObjectInputStream 对象的反序列化流"></a><code>ObjectInputStream</code> 对象的反序列化流</h2><p> <code>java.io.ObjectInputStream</code> 类继承 <code>InputStream</code> 类，是对象的反序列化流，把文件中保存的对象以流的方式读取出来使用。</p>
<p>构造方法：</p>
<ul>
<li><code>ObjectInputStream(InputStream in)</code> ：创建从指定 <code>InputStream</code> 读取的 <code>ObjectInputStream</code>。<ul>
<li>参数 <code>InputStream in</code> ：字节输入流。</li>
</ul>
</li>
</ul>
<p>特有的成员方法：</p>
<ul>
<li><code>Object readObject()</code> ：从 <code>ObjectInputStream</code> 读取对象。</li>
</ul>
<p>使用步骤:</p>
<ol>
<li>创建 <code>ObjectInputStream</code> 对象，构造方法中传递字节输入流；</li>
<li>使用 <code>ObjectInputStream</code> 对象中的方法 <code>readObject</code> 读取保存对象的文件；</li>
<li>释放资源；</li>
<li>使用读取出来的对象。</li>
</ol>
<h3 id="ClassNotFoundException-异常"><a href="#ClassNotFoundException-异常" class="headerlink" title="ClassNotFoundException 异常"></a><code>ClassNotFoundException</code> 异常</h3><p> <code>readObject</code> 方法声明抛出了 <code>ClassNotFoundException</code> （<code>class</code> 文件找不到异常），当不存在对象的 <code>class</code> 文件时抛出此异常。</p>
<p>反序列化的前提：</p>
<ol>
<li>类必须实现 <code>Serializable</code> 接口；</li>
<li>必须存在类对应的 <code>class</code> 文件。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo02ObjectInputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"person.txt"</span>));</span><br><span class="line">        Object o = ois.readObject();</span><br><span class="line">        ois.close();</span><br><span class="line">        <span class="comment">// 使用读取出来的对象</span></span><br><span class="line">        System.out.println(o);</span><br><span class="line">        Person p = (Person)o;</span><br><span class="line">        System.out.println(p.getName() + p.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="InvalidClassException-异常"><a href="#InvalidClassException-异常" class="headerlink" title="InvalidClassException 异常"></a><code>InvalidClassException</code> 异常</h3><p>发生 <code>InvalidClassException</code> 异常的原因如下：</p>
<ul>
<li>该类的序列版本号与从流中读取的类描述符的版本号不匹配；</li>
<li>该类包含未知数据类型；</li>
<li>该类没有可访问的无参数构造方法。</li>
</ul>
<p> <code>Serializable</code> 接口给需要序列化的类，提供了一个序列版本号 <code>serialVersionUID</code> ，该版本号的目的在于验证序列化的对象和对应类是否版本匹配。</p>
<p>当 JVM 反序列化对象时，能找到 <code>class</code> 文件，但是 <code>class</code> 文件在序列化对象之后发生了修改，那么反序列化操作也会失败，抛出一个 <code>InvalidClassException</code> 异常。</p>
<p><img src="/2020/02/20/java-advanced-4/序列号冲突异常的原理和解决方案.png" alt></p>
<h2 id="案例：序列化集合"><a href="#案例：序列化集合" class="headerlink" title="案例：序列化集合"></a>案例：序列化集合</h2><p>当我们想在文件中保存多个对象的时候，可以把多个对象存储到一个集合中，对集合进序列化和反序列化。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        ArrayList&lt;Person&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Person(<span class="string">"张三"</span>,<span class="number">18</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Person(<span class="string">"李四"</span>,<span class="number">19</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Person(<span class="string">"王五"</span>,<span class="number">20</span>));</span><br><span class="line">        </span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"list.txt"</span>));</span><br><span class="line">        oos.writeObject(list);</span><br><span class="line">        </span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"list.txt"</span>));</span><br><span class="line">        Object o = ois.readObject();</span><br><span class="line">        ArrayList&lt;Person&gt; list2 = (ArrayList&lt;Person&gt;)o;</span><br><span class="line">        <span class="keyword">for</span> (Person p : list2) &#123;</span><br><span class="line">            System.out.println(p);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        ois.close();</span><br><span class="line">        oos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="打印流"><a href="#打印流" class="headerlink" title="打印流"></a>打印流</h1><h2 id="打印流概述"><a href="#打印流概述" class="headerlink" title="打印流概述"></a>打印流概述</h2><p>平时我们在控制台打印输出，是调用 <code>print</code> 方法和 <code>println</code>方法完成的，这两个方法都来自于  <code>java.io.PrintStream</code> 类，该类能够方便地打印各种数据类型的值，是一种便捷的输出方式。</p>
<p><code>PrintStream</code> 为其他输出流添加了功能，使它们能够方便地打印各种数据值表示形式。</p>
<p><code>PrintStream</code> 的特点：</p>
<ol>
<li><strong>只负责数据的输出</strong>，不负责数据的读取；</li>
<li>与其他输出流不同，<code>PrintStream</code> <strong>永远不会抛出 <code>IOException</code></strong>；</li>
<li>有特有的方法 <code>print</code>，<code>println</code>。</li>
</ol>
<p>构造方法：</p>
<ul>
<li><code>PrintStream(File file)</code> ：输出的目的地是一个文件。</li>
<li><code>PrintStream(OutputStream out)</code> ：输出的目的地是一个字节输出流。</li>
<li><code>PrintStream(String fileName)</code> ：输出的目的地是一个文件路径。</li>
</ul>
<p> <code>PrintStream</code> 类继承 <code>OutputStream</code> 类，继承自父类的成员方法有：</p>
<ul>
<li><code>public void close()</code> ：关闭此输出流并释放与此流相关联的任何系统资源。  </li>
<li><code>public void flush()</code> ：刷新此输出流并强制任何缓冲的输出字节被写出。  </li>
<li><code>public void write(byte[] b)</code> ：将 b.length 字节从指定的字节数组写入此输出流。  </li>
<li><code>public void write(byte[] b, int off, int len)</code> ：从指定的字节数组写入 len 字节，从偏移量 off 开始输出到此输出流。  </li>
<li><code>public void write(int b)</code> ：将指定的字节写入此输出流。</li>
</ul>
<p>注意：</p>
<ul>
<li>如果使用继承自父类的 <code>write</code> 方法写数据，那么查看数据的时候会查询编码表（如 97 → a）。</li>
<li>如果使用自己特有的方法 <code>print</code> / <code>println</code> 方法写数据，写的数据原样输出（如 97 → 97）。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoPrintStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建打印流PrintStream对象,构造方法中绑定要输出的目的地</span></span><br><span class="line">        PrintStream ps = <span class="keyword">new</span> PrintStream(<span class="string">"print.txt"</span>);</span><br><span class="line">        <span class="comment">// 如果使用继承自父类的write方法写数据,那么查看数据的时候会查询编码表 97-&gt;a</span></span><br><span class="line">        ps.write(<span class="number">97</span>);</span><br><span class="line">        <span class="comment">// 如果使用自己特有的方法print/println方法写数据,写的数据原样输出 97-&gt;97</span></span><br><span class="line">        ps.println(<span class="number">97</span>);</span><br><span class="line">        ps.println(<span class="number">8.8</span>);</span><br><span class="line">        ps.println(<span class="string">'a'</span>);</span><br><span class="line">        ps.println(<span class="string">"HelloWorld"</span>);</span><br><span class="line">        ps.println(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//释放资源</span></span><br><span class="line">        ps.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="改变打印流向"><a href="#改变打印流向" class="headerlink" title="改变打印流向"></a>改变打印流向</h2><p>可以改变输出语句的目的地（打印流的流向）。输出语句，默认在控制台输出，使用 <code>System.setOut()</code> 方法将输出语句的目的地改为参数中传递的打印流的目的地。</p>
<ul>
<li><code>static void setOut(PrintStream out)</code> ：重新分配“标准”输出流。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoPrintStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我是在控制台输出"</span>);</span><br><span class="line"></span><br><span class="line">        PrintStream ps = <span class="keyword">new</span> PrintStream(<span class="string">"目的地是打印流.txt"</span>);</span><br><span class="line">        System.setOut(ps); <span class="comment">// 把输出语句的目的地改变为打印流的目的地</span></span><br><span class="line">        System.out.println(<span class="string">"我在打印流的目的地中输出"</span>);</span><br><span class="line"></span><br><span class="line">        ps.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    

    
      
    

    
    
    

    

    
      
    
    
      <div>
        <div id="reward-container">
  <div>喜欢就支持小方方一下吧~</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">

    
      
      
        
      
      <div style="display: inline-block">
        <img src="/images/wechatpay.jpg" alt="Flexia 微信支付"/>
        <p>微信支付</p>
      </div>
    
      
      
        
      
      <div style="display: inline-block">
        <img src="/images/alipay.jpg" alt="Flexia 支付宝"/>
        <p>支付宝</p>
      </div>
    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/JavaSE/" rel="tag"><i class="fa fa-tag"></i> JavaSE</a>
          
            <a href="/tags/Java%E8%AF%AD%E8%A8%80%E9%AB%98%E7%BA%A7/" rel="tag"><i class="fa fa-tag"></i> Java语言高级</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/02/14/java-advanced-3.html" rel="next" title="Java语言高级（3）异常与多线程">
                <i class="fa fa-chevron-left"></i> Java语言高级（3）异常与多线程
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/02/23/java-advanced-5.html" rel="prev" title="Java语言高级（5）网络编程与JDK8新特性">
                Java语言高级（5）网络编程与JDK8新特性 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="Flexia"/>
            
              <p class="site-author-name" itemprop="name">Flexia</p>
              <div class="site-description motion-element" itemprop="description">小方方跨到计算机，要开始学习各种计算机知识啦，加油嗷~</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">40</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">26</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">43</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/fangfengxin" title="GitHub &rarr; https://github.com/fangfengxin" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:fangfengxin98@163.com" title="E-Mail &rarr; mailto:fangfengxin98@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#File-类"><span class="nav-number">1.</span> <span class="nav-text">File 类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#File-类概述"><span class="nav-number">1.1.</span> <span class="nav-text">File 类概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#静态成员变量"><span class="nav-number">1.2.</span> <span class="nav-text">静态成员变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绝对路径和相对路径"><span class="nav-number">1.3.</span> <span class="nav-text">绝对路径和相对路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构造方法"><span class="nav-number">1.4.</span> <span class="nav-text">构造方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常用方法"><span class="nav-number">1.5.</span> <span class="nav-text">常用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#获取功能的方法"><span class="nav-number">1.5.1.</span> <span class="nav-text">获取功能的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断功能的方法"><span class="nav-number">1.5.2.</span> <span class="nav-text">判断功能的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建删除功能的方法"><span class="nav-number">1.5.3.</span> <span class="nav-text">创建删除功能的方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#目录的遍历"><span class="nav-number">1.6.</span> <span class="nav-text">目录的遍历</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#递归"><span class="nav-number">2.</span> <span class="nav-text">递归</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#递归概述"><span class="nav-number">2.1.</span> <span class="nav-text">递归概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#递归执行过程"><span class="nav-number">2.2.</span> <span class="nav-text">递归执行过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#递归累加求和"><span class="nav-number">2.2.1.</span> <span class="nav-text">递归累加求和</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码执行图解"><span class="nav-number">2.2.2.</span> <span class="nav-text">代码执行图解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#递归求阶乘"><span class="nav-number">2.2.3.</span> <span class="nav-text">递归求阶乘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#递归打印多级目录"><span class="nav-number">2.2.4.</span> <span class="nav-text">递归打印多级目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件搜索"><span class="nav-number">2.2.5.</span> <span class="nav-text">文件搜索</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#过滤器"><span class="nav-number">3.</span> <span class="nav-text">过滤器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#FileFilter-接口"><span class="nav-number">3.1.</span> <span class="nav-text">FileFilter 接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FilenameFilter-接口"><span class="nav-number">3.2.</span> <span class="nav-text">FilenameFilter 接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过滤器优化文件搜索"><span class="nav-number">3.3.</span> <span class="nav-text">过滤器优化文件搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FileFilter-过滤器的原理"><span class="nav-number">3.4.</span> <span class="nav-text">FileFilter 过滤器的原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lambda-优化"><span class="nav-number">3.5.</span> <span class="nav-text">Lambda 优化</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IO-概述"><span class="nav-number">4.</span> <span class="nav-text">IO 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是-IO"><span class="nav-number">4.1.</span> <span class="nav-text">什么是 IO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IO-的分类"><span class="nav-number">4.2.</span> <span class="nav-text">IO 的分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IO-的流向"><span class="nav-number">4.3.</span> <span class="nav-text">IO 的流向</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字节流"><span class="nav-number">5.</span> <span class="nav-text">字节流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一切皆为字节"><span class="nav-number">5.1.</span> <span class="nav-text">一切皆为字节</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OutputStream-字节输出流"><span class="nav-number">5.2.</span> <span class="nav-text">OutputStream 字节输出流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FileOutputStream-文件字节输出流"><span class="nav-number">5.3.</span> <span class="nav-text">FileOutputStream 文件字节输出流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#构造方法-1"><span class="nav-number">5.3.1.</span> <span class="nav-text">构造方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写入字节数据"><span class="nav-number">5.3.2.</span> <span class="nav-text">写入字节数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#写入一个字节"><span class="nav-number">5.3.2.1.</span> <span class="nav-text">写入一个字节</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件存储的原理"><span class="nav-number">5.3.2.2.</span> <span class="nav-text">文件存储的原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#写入字节数组"><span class="nav-number">5.3.2.3.</span> <span class="nav-text">写入字节数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据追加续写"><span class="nav-number">5.3.2.4.</span> <span class="nav-text">数据追加续写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#写入换行"><span class="nav-number">5.3.2.5.</span> <span class="nav-text">写入换行</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#InputStream-字节输入流"><span class="nav-number">5.4.</span> <span class="nav-text">InputStream 字节输入流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FileInputStream-文件字节输入流"><span class="nav-number">5.5.</span> <span class="nav-text">FileInputStream 文件字节输入流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#构造方法-2"><span class="nav-number">5.5.1.</span> <span class="nav-text">构造方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#读取字节数据"><span class="nav-number">5.5.2.</span> <span class="nav-text">读取字节数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#读取一个字节"><span class="nav-number">5.5.2.1.</span> <span class="nav-text">读取一个字节</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#读取字节数组"><span class="nav-number">5.5.2.2.</span> <span class="nav-text">读取字节数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字节流读取文件的原理"><span class="nav-number">5.5.2.3.</span> <span class="nav-text">字节流读取文件的原理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例：文件复制"><span class="nav-number">5.6.</span> <span class="nav-text">案例：文件复制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字节流读取中文的问题"><span class="nav-number">5.7.</span> <span class="nav-text">字节流读取中文的问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符流"><span class="nav-number">6.</span> <span class="nav-text">字符流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Reader-字符输入流"><span class="nav-number">6.1.</span> <span class="nav-text">Reader 字符输入流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FileReader-文件字符输入流"><span class="nav-number">6.2.</span> <span class="nav-text">FileReader 文件字符输入流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#构造方法-3"><span class="nav-number">6.2.1.</span> <span class="nav-text">构造方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#读取字符数据"><span class="nav-number">6.2.2.</span> <span class="nav-text">读取字符数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#读取一个字符"><span class="nav-number">6.2.2.1.</span> <span class="nav-text">读取一个字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#读取字符数组"><span class="nav-number">6.2.2.2.</span> <span class="nav-text">读取字符数组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Writer-字符输出流"><span class="nav-number">6.3.</span> <span class="nav-text">Writer 字符输出流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FileWriter-文件字符输出流"><span class="nav-number">6.4.</span> <span class="nav-text">FileWriter 文件字符输出流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#构造方法-4"><span class="nav-number">6.4.1.</span> <span class="nav-text">构造方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写入字符数据"><span class="nav-number">6.4.2.</span> <span class="nav-text">写入字符数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#写入一个字符"><span class="nav-number">6.4.2.1.</span> <span class="nav-text">写入一个字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#flush-与-close-的区别"><span class="nav-number">6.4.2.2.</span> <span class="nav-text">flush 与 close 的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#写入多个字符"><span class="nav-number">6.4.2.3.</span> <span class="nav-text">写入多个字符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#续写和换行"><span class="nav-number">6.4.3.</span> <span class="nav-text">续写和换行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符流的注意事项"><span class="nav-number">6.5.</span> <span class="nav-text">字符流的注意事项</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IO-异常的处理"><span class="nav-number">7.</span> <span class="nav-text">IO 异常的处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JDK-7-之前的处理"><span class="nav-number">7.1.</span> <span class="nav-text">JDK 7 之前的处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDK-7-的处理"><span class="nav-number">7.2.</span> <span class="nav-text">JDK 7 的处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDK-9-的处理"><span class="nav-number">7.3.</span> <span class="nav-text">JDK 9 的处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Properties-属性集"><span class="nav-number">8.</span> <span class="nav-text">Properties 属性集</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Properties-类"><span class="nav-number">8.1.</span> <span class="nav-text">Properties 类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#构造方法-5"><span class="nav-number">8.1.1.</span> <span class="nav-text">构造方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串操作方法"><span class="nav-number">8.1.2.</span> <span class="nav-text">字符串操作方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#与输出流相关的方法"><span class="nav-number">8.1.3.</span> <span class="nav-text">与输出流相关的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#与输入流相关的方法"><span class="nav-number">8.1.4.</span> <span class="nav-text">与输入流相关的方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#缓冲流"><span class="nav-number">9.</span> <span class="nav-text">缓冲流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#缓冲流概述"><span class="nav-number">9.1.</span> <span class="nav-text">缓冲流概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BufferedOutputStream-字节缓冲输出流"><span class="nav-number">9.2.</span> <span class="nav-text">BufferedOutputStream 字节缓冲输出流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BufferedInputStream-字节缓冲输入流"><span class="nav-number">9.3.</span> <span class="nav-text">BufferedInputStream 字节缓冲输入流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BufferedWriter-字符缓冲输出流"><span class="nav-number">9.4.</span> <span class="nav-text">BufferedWriter 字符缓冲输出流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BufferedReader-字符缓冲输入流"><span class="nav-number">9.5.</span> <span class="nav-text">BufferedReader 字符缓冲输入流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例：文本排序"><span class="nav-number">9.6.</span> <span class="nav-text">案例：文本排序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#转换流"><span class="nav-number">10.</span> <span class="nav-text">转换流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符编码和字符集"><span class="nav-number">10.1.</span> <span class="nav-text">字符编码和字符集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#字符编码"><span class="nav-number">10.1.1.</span> <span class="nav-text">字符编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符集"><span class="nav-number">10.1.2.</span> <span class="nav-text">字符集</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编码引出的问题"><span class="nav-number">10.2.</span> <span class="nav-text">编码引出的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#转换流的原理"><span class="nav-number">10.3.</span> <span class="nav-text">转换流的原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OutputStreamWriter-类"><span class="nav-number">10.4.</span> <span class="nav-text">OutputStreamWriter 类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#InputStreamReader-类"><span class="nav-number">10.5.</span> <span class="nav-text">InputStreamReader 类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例：转换文件编码"><span class="nav-number">10.6.</span> <span class="nav-text">案例：转换文件编码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#序列化流"><span class="nav-number">11.</span> <span class="nav-text">序列化流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#序列化流概述"><span class="nav-number">11.1.</span> <span class="nav-text">序列化流概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ObjectOutputStream-对象的序列化流"><span class="nav-number">11.2.</span> <span class="nav-text">ObjectOutputStream 对象的序列化流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Serializable-接口"><span class="nav-number">11.2.1.</span> <span class="nav-text">Serializable 接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#transient-关键字"><span class="nav-number">11.2.2.</span> <span class="nav-text">transient 关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#序列化操作"><span class="nav-number">11.2.3.</span> <span class="nav-text">序列化操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ObjectInputStream-对象的反序列化流"><span class="nav-number">11.3.</span> <span class="nav-text">ObjectInputStream 对象的反序列化流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ClassNotFoundException-异常"><span class="nav-number">11.3.1.</span> <span class="nav-text">ClassNotFoundException 异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#InvalidClassException-异常"><span class="nav-number">11.3.2.</span> <span class="nav-text">InvalidClassException 异常</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例：序列化集合"><span class="nav-number">11.4.</span> <span class="nav-text">案例：序列化集合</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#打印流"><span class="nav-number">12.</span> <span class="nav-text">打印流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#打印流概述"><span class="nav-number">12.1.</span> <span class="nav-text">打印流概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#改变打印流向"><span class="nav-number">12.2.</span> <span class="nav-text">改变打印流向</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-snowflake-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Flexia</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">743k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">11:15</span>
  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  





  
    
    
  
  <script color='0,0,0' opacity='1' zIndex='-1' count='20' src="/lib/canvas-nest/canvas-nest.min.js"></script>









  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>




  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  
  

<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: '7kWTdJsaz4FTWvD11vJ68LrU-gzGzoHsz',
    appKey: 'IagQj5azVtsiUPyjWRrvasm6',
    placeholder: '要不要说点啥……',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn'
  });
</script>




  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      
        // ref: https://github.com/ForbesLindesay/unescape-html
        var unescapeHtml = function(html) {
          return String(html)
            .replace(/&quot;/g, '"')
            .replace(/&#39;/g, '\'')
            .replace(/&#x3A;/g, ':')
            // replace all the other &#x; chars
            .replace(/&#(\d+);/g, function (m, p) { return String.fromCharCode(p); })
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>')
            .replace(/&amp;/g, '&');
        };
      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                content = unescapeHtml(content);
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  
<script>
if ($('body').find('pre.mermaid').length) {
  $.ajax({
    type: 'GET',
    url: '//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js',
    dataType: 'script',
    cache: true,
    success: function() {
      mermaid.initialize({
        theme: 'forest',
        logLevel: 3,
        flowchart: { curve: 'linear' },
        gantt: { axisFormat: '%m/%d/%Y' },
        sequence: { actorMargin: 50 }
      });
    }
  });
}
</script>


  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  


  

</body>
</html>
